<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}" dir="ltr">
{{ partialCached "head.html" . "updated-list-key"}}

<body class="list-body">
    <!-- Google Tag Manager (noscript) -->
    <div id="g-tag-body">
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ $.Site.Params.GTMCode }}" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    </div>
    <!-- End Google Tag Manager (noscript) -->
    {{ partialCached "nav-bar.html" . "updated-list-key"}}
    <!-- Offerings Contents starts here -->
    <section class="commun-wrapper">
        <article class="new-ofering-row-3 commun-content-row-3">
            <div class="container">
                {{ partialCached "bread-crumb.html" . "updated-list-key"}}
                <div class="row">
                    <div class="col-lg-12">
                        <div class="category-what-new-row min-height">
                            <div class="top-10-most-row">
                                <div class="top-10-most-row-tab-ttl">
                                    <ul class="nav nav-tabs text-center" id="brief-Offerings-tab" role="tablist">
                                        Offerings:
                                        <li class="nav-item">
                                            <a class="nav-link show" id="discovered-tab"
                                                href="/brief/daily/offerings/discovered"><i class="far fa-calendar-alt"></i> Discovered
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link show" id="trending-tab"
                                                href="/brief/daily/offerings/trending"><i class="fas fa-chart-line"></i>
                                                Trending 
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link show active" id="recent-tab"
                                                href="javascript:void(0)"><i class="fas fa-history"></i>
                                                Recently Updated
                                            </a>
                                        </li>
                                    </ul>
                                    <ul class="nav nav-tabs text-center" id="brief-resource-tab">
                                        Resources:
                                        <li class="nav-item">
                                            <a class="nav-link show" id="popular-tab"
                                                href="/brief/daily/resources/popular"><i class="fas fa-chart-line"></i>
                                                Popular 
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link show" id="latest-tab"
                                                href="/brief/daily/resources/latest"><i class="fas fa-history"></i>
                                                Latest
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="tab-content" id="myTabContent">
                                    <div class="tab-pane fade active show" id="followed" role="tabpanel"
                                        aria-labelledby="followed-tab">
                                        <div class="top-10-most-list">
                                            <div class="fhir-list-row">
                                                {{ if( $.Site.Params.modules.brief.daily.offerings.limitListingsPages ) }}
                                                    {{ $pagesLimit := int ($.Site.Params.modules.brief.daily.offerings.limitListingsPages) }}
                                                    {{ $itemsPerPage := int ($.Site.Params.modules.brief.daily.offerings.itemsPerPages) }}
                                                    {{ $itemsLimit := (mul $pagesLimit $itemsPerPage) }}
                                                    {{ $postCount := len (first $itemsLimit (where (where (where .Site.Pages "Params.type"  "post" ) "Params.displayinlist" "!=" false ) "Params.author" "!=" "Shahid Shah")) }}
                                                    {{ $pages := (first $itemsLimit (where (where (where .Site.Pages "Params.type"  "post" ) "Params.displayinlist" "!=" false ) "Params.author" "!=" "Shahid Shah")) }}
                                                    {{ $sorted := sort $pages "Params.updatedon" "desc" }}                                             
                                                    {{ $paginator := .Paginate $sorted  }}
                                                    {{ range (sort $paginator.Pages ".Params.updatedon" "desc") }}
                                                        {{ .Render "li-brief-daily-updated" }}
                                                    {{ end }}

                                                    <div class="custom-pagination-block"> {{ $postCount }} items 
                                                    {{ template "_internal/pagination.html" . }}
                                                    </div> 
                                                {{ else }} 
                                                    {{ $postCount := len (where (where (where .Site.Pages "Params.type"  "post" ) "Params.displayinlist" "!=" false ) "Params.author" "!=" "Shahid Shah") }}
                                                    {{ $pages := (where (where (where .Site.Pages "Params.type"  "post" ) "Params.displayinlist" "!=" false ) "Params.author" "!=" "Shahid Shah") }}
                                                    {{ $sorted := sort $pages "Params.updatedon" "desc" }}                                             
                                                    {{ $paginator := .Paginate $sorted  }}
                                                    {{ range (sort $paginator.Pages ".Params.updatedon" "desc") }}
                                                        {{ .Render "li-brief-daily-updated" }}
                                                    {{ end }}

                                                    <div class="custom-pagination-block"> {{ $postCount }} items 
                                                    {{ template "_internal/pagination.html" . }}
                                                    </div>  

                                                {{ end }}
                                            </div>
                                        </div>                                      
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </article>
    </section>
    {{ partialCached "scripts.html" . }}  
    <div id="formContainer"></div>
    {{ partialCached "script-social-share.html" . }}
    {{ partialCached "script-upvote.html" . }}
    {{ partialCached "footer.html" . }}
</body>
</html>
<script>
    $(".updatedDate").each(function() {
        var lastUpdatedDate = $(this).attr("data-lastUpdateDate");
        var daysCount = daysDiff(lastUpdatedDate);
        if(daysCount == 0){
            var text = "Updated Today"
        }
        else if (daysCount == -1){
            text="Updated "+(daysCount*-1)+" day ago";
        }
        else{
            text="Updated "+(daysCount*-1)+" days ago";
        }
        $(this).html(text);
    });

    function daysDiff(lastUpdatedDate){
        var today=new Date();
        var timeUpdated = lastUpdatedDate;
        var timeDiff =timeUpdated - today.getTime(); 
        var daysCount = Math.ceil(timeDiff / (1000 * 3600 * 24)); 
        return daysCount;
    }
</script>  