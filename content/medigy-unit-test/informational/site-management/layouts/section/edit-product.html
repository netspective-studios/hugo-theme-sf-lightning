<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}" dir="ltr" >
{{ partial "head.html" . }}
<link rel="stylesheet" href="/css/select2.min.css" />
<script type="text/javascript" src="/js/select2.min.js"></script>
<script type="text/javascript" src="/js/validations/validate.js"></script>
<script>
    var delete_cookie = function(name) {
        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';
    };   
    // Encode the String
    //var encodedString = btoa(str);
    function base64EncodeUnicode(str) {
        // First we escape the string using encodeURIComponent to get the UTF-8 encoding of the characters, 
        // then we convert the percent encodings into raw bytes, and finally feed it to btoa() function.
        utf8Bytes = encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {
                return String.fromCharCode('0x' + p1);
        });

        return btoa(utf8Bytes);
    }
    function is_url(str) {
        regexp = /^(?:(?:https?):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;
        if (regexp.test(str)) {

          return true;
        }
        else
          return false;
    }
    var getCookie = function(key) {
      var keyValue = document.cookie.match('(^|;) ?' + key + '=([^;]*)(;|$)');
      return keyValue ? keyValue[2] : null;
    }    
    //var sessionId = getCookie('sessionId');
    //var companyId = getCookie('tenantId');
    var offeringId = getCookie('offeringId');
    var tenantId = getCookie('tenantId');
    var sessionId = getCookie('sessionId');
    console.log("query{\n  getIndividualProductProfile(offeringId:"+offeringId+"\n  ,authorization:{\n    sessionID:\"" + sessionId + "\"\n  }){\n    id\n    name\n    createdBy\n    offeringType\n    ownerCheck\n    description\n   shortDescription\n  createdOn\n    updatedOn\n    expiryOn\n    status\n   organization\n   vendorName\n    vendorEmail\n    vendorContact\n    permaLink\n    license {\n      name\n      key\n    }\n    link\n    featureProduct\n    githubUrl\n    facebook\n    twitter\n    linkedIn\n    instagram\n    permaLink\n    category{\n      name\n      key\n    }\n    healthItStandards{\n      name\n    }\n    fhirVersions{\n      name\n    }\n    fhirSupportedResources{\n      name\n    }\n    hl7Versions{\n      name\n    }\n    hl7SupportedMessages{\n      name\n    }\n    cdaVersions{\n      name\n    }\n    ccowVersions{\n      name\n    }\n  }\n}\n");
    if(offeringId != null)
    {     
      var status ="Failed";
      var serviceData = { "url": "{{ $.Site.Params.GraphQLUrl }}", "method": "GET", "query": "query{\n  getIndividualProductProfile(offeringId:"+offeringId+"\n  ,authorization:{\n    sessionID:\"" + sessionId + "\"\n  }){\n    id\n    name\n    createdBy\n    offeringType\n    ownerCheck\n    description\n   shortDescription\n   createdOn\n    updatedOn\n    expiryOn\n    status\n   organization\n   vendorName\n    vendorEmail\n    vendorContact\n    permaLink\n    license {\n      name\n      key\n    }\n    link\n    featureProduct\n    githubUrl\n    facebook\n    twitter\n    linkedIn\n    instagram\n    permaLink\n    category{\n      name\n      key\n    }\n    healthItStandards{\n      name\n    }\n    fhirVersions{\n      name\n    }\n    fhirSupportedResources{\n      name\n    }\n    hl7Versions{\n      name\n    }\n    hl7SupportedMessages{\n      name\n    }\n    cdaVersions{\n      name\n    }\n    ccowVersions{\n      name\n    }\n  }\n}\n" };
          ajaxPageServiceCall.serviceCall(serviceData).then(response => {
            console.log(response);
            $('#offeringId').val(offeringId);
            $('input:radio[name="offeringItem"]').filter('[value="'+response.data.getIndividualProductProfile.offeringType+ '"]').prop('checked', true);
            if(response.data.getIndividualProductProfile.license != null){
              if(response.data.getIndividualProductProfile.license.length != 0)
              {
              $('input:radio[name="checkOpensourcelicense"]').filter('[value="true"]').prop('checked', true);

                $('#openSourceLicense option[value="'+response.data.getIndividualProductProfile.license.name+'$,'+response.data.getIndividualProductProfile.license.key+'"]').attr("selected","selected");
                
              $('#opensourceDiv').show();
              }
              else
              {
                $('#opensourceDiv').hide();
                $('input:radio[name="checkOpensourcelicense"]').filter('[value="true"]').prop('checked', true);
              }
            }
          
            if(response.data.getIndividualProductProfile.ownerCheck == "No")
            {
              //$('#checkOwner').val('false');
              $('input:radio[name="checkOwner"][value="false"]').prop('checked', true);
              $('input[name=checkOwner]').attr("disabled",true);
              $('#vendorName').attr('disabled','disabled');
              $('#contactNumber').attr('disabled','disabled');
              $('#contact').attr('disabled','disabled');
              $('#organization').attr('disabled','disabled');
              $('.star_color').css('color','#F00');
            }
            else
            {
              //$('#checkOwner').val('true');
             // alert();
              $('input[name=checkOwner]').attr("disabled",true);
              $('input:radio[name="checkOwner"][value="true"]').prop('checked', true);
              $('#tenantId').html('');
              $('#vendorName').attr('required','required');
              $('#contactNumber').attr('required','required');
              $('#contact').attr('required','required'); 
              $('.star_color').css('color','#F00');
              $('#tenantId').html($('#tenantDetails').html());
              $('.instDisable').attr('disabled','disabled');
              $('#tenantId').attr('required','required');
              $('#tenantDetailDiv').show();
              $('.vendorCheckDet').attr('disabled','disabled');
               $('#vendorName').attr('disabled','disabled');
              $('#contactNumber').attr('disabled','disabled');
              $('#contact').attr('disabled','disabled');
              $('#organization').attr('disabled','disabled');
              $('.vendorInfo').hide();

              var tenantId = $('#tenantId').val()
              setTenantDetails(tenantId);
            }
            $('#addProductName').val(response.data.getIndividualProductProfile.name);
            $('#featureProduct').val(response.data.getIndividualProductProfile.featureProduct);
            //$('#openSourceLicense').val();
            $('#description').val(response.data.getIndividualProductProfile.description);
            $('#shortDescription').val(response.data.getIndividualProductProfile.shortDescription);
            $('#githubUrl').val(response.data.getIndividualProductProfile.githubUrl);
            $('#link').val(response.data.getIndividualProductProfile.link);
            $('#organization').val(response.data.getIndividualProductProfile.organization);
            $('#vendorName').val(response.data.getIndividualProductProfile.vendorName);
            $('#contact').val(response.data.getIndividualProductProfile.vendorEmail);
            $('#contactNumber').val(response.data.getIndividualProductProfile.vendorContact);
            $('#permalink').val(response.data.getIndividualProductProfile.permaLink);
            $('#facebook').val(response.data.getIndividualProductProfile.facebook);
            $('#twitter').val(response.data.getIndividualProductProfile.twitter);
            $('#linkedin').val(response.data.getIndividualProductProfile.linkedIn);
            $('#instagram').val(response.data.getIndividualProductProfile.instagram);
            if(response.data.getIndividualProductProfile.category != null)
            {
              var categoryLength = response.data.getIndividualProductProfile.category.length
              var categoryArray = [];
              for (var i = 0; i< categoryLength; i++)
              {
                categoryArray[i] = response.data.getIndividualProductProfile.category[i].name+'$,'+response.data.getIndividualProductProfile.category[i].key;
              }
             //var arrOptions = ["Medigy: Discharge And Reduced Admission$,DischargeAndReducedAdmission","Medigy: Coding/Billing And Claims$,CodingBillingAndClaims"];
             categoryArrayNew = $('#topichiddenValue').val(JSON.stringify(categoryArray));
             console.log(categoryArray);
            //  setTimeout(function(){
            //   $('#category').val(categoryArray);    
            //   $('#category').select2();
            //   }, 2000);
            }
            if(response.data.getIndividualProductProfile.healthItStandards != null)
            {
              var hitStatndardLength =  response.data.getIndividualProductProfile.healthItStandards.length
              var hitStatndardArray = [];
              for (var i = 0; i< hitStatndardLength; i++)
              {
                hitStatndardArray[i] = response.data.getIndividualProductProfile.healthItStandards[i].name;
                $("input[name='hitStandards'][value='"+response.data.getIndividualProductProfile.healthItStandards[i].name+ "'").prop('checked', true);
                if(hitStatndardArray[i] == 'FHIR')
                {
                  $('#fhirDiv').show();
                }
                if(hitStatndardArray[i] == 'HL7')
                {
                  $('#hl7Div').show();
                }
                if(hitStatndardArray[i] == 'CDA')
                {
                  $('#cdaDiv').show();
                }
                if(hitStatndardArray[i] == 'CCOW')
                {
                  $('#ccowDiv').show();
                }

              }
            } 
            if(response.data.getIndividualProductProfile.fhirSupportedResources != null)
            {
              var fhirSupportedResourcesLength =  response.data.getIndividualProductProfile.fhirSupportedResources.length
              var fhirSupportedResourcesArray = [];
              for (var i = 0; i< fhirSupportedResourcesLength; i++)
              {
                //fhirSupportedResourcesArray[i] = response.data.getIndividualProductProfile.fhirSupportedResources[i].name;
                $("input[name='fhriResourceSupport'][value='"+response.data.getIndividualProductProfile.fhirSupportedResources[i].name+ "'").prop('checked', true);
              
              }
            }
            if(response.data.getIndividualProductProfile.fhirVersions != null)
            {
              var fhirVersionsLength =  response.data.getIndividualProductProfile.fhirVersions.length
              var fhirVersionsArray = [];
              for (var i = 0; i< fhirVersionsLength; i++)
              {
                $("input[name='fhirVersion'][value='"+response.data.getIndividualProductProfile.fhirVersions[i].name+ "'").prop('checked', true);

              }
            }           
            //$("input[name='fhriResourceSupport']").val(fhirSupportedResourcesArray);
            if(response.data.getIndividualProductProfile.hl7Versions != null)
            {
              var hl7VersionsLength =  response.data.getIndividualProductProfile.hl7Versions.length
              var hl7VersionsArray = [];
              for (var i = 0; i< hl7VersionsLength; i++)
              {
                //hl7VersionsArray[i] = response.data.getIndividualProductProfile.hl7Versions[i].name;
                $("input[name='hl7version'][value='"+response.data.getIndividualProductProfile.hl7Versions[i].name+ "'").prop('checked', true);
              }

            }
            if(response.data.getIndividualProductProfile.hl7SupportedMessages != null)
            {
              var hl7messageLength =  response.data.getIndividualProductProfile.hl7SupportedMessages.length
              var hl7messageArray = [];
              for (var i = 0; i< hl7messageLength; i++)
              {
                hl7messageArray[i] = response.data.getIndividualProductProfile.hl7SupportedMessages[i].name;
              }
              $("input[name='hl7message'][value='"+response.data.getIndividualProductProfile.hl7SupportedMessages[i].name+ "'").val(hl7messageArray);
              //$('#hl7message').val(hl7messageArray);
            }
            if(response.data.getIndividualProductProfile.cdaVersions != null)
            {
              var cdaversionLength =  response.data.getIndividualProductProfile.cdaVersions.length
              var cdaversionArray = [];
              for (var i = 0; i< cdaversionLength; i++)
              {
                cdaversionArray[i] = response.data.getIndividualProductProfile.cdaVersions[i].name;
              }
              $("input[name='cdaversion'][value='"+response.data.getIndividualProductProfile.cdaVersions[i].name+ "'").val(cdaversionArray);
            //$('#cdaversion').val(cdaversionArray);           
            }
            if(response.data.getIndividualProductProfile.cdaVersions != null)
            {
              var ccowVersionsLength =  response.data.getIndividualProductProfile.ccowVersions.length
              var ccowVersionsArray = [];
              for (var i = 0; i< ccowVersionsLength; i++)
              {
                ccowVersionsArray[i] = response.data.getIndividualProductProfile.ccowVersions[i].name;
              }
              $("input[name='ccowversion'][value='"+response.data.getIndividualProductProfile.ccowVersions[i].name+ "'").val(ccowVersionsArray);            
            //$('#ccowversion').val(ccowVersionsArray);          
            }
         })
          .catch(error => {
              console.log(error);
          }); 
    }
    $(document).ready(function(){  
      var sentence = '';
      $('#description').click(function() {
        $('.select2').css("width", "100%");
        var catSelectedValues =  $("#category").val();
        if( catSelectedValues.length > 0){
          var keyValue ='';
          for(let i = 0; i < catSelectedValues.length; i++){
          var splittedOption = catSelectedValues[i].split('$,');
            keyValue += '"'+splittedOption[1]+'",';
            sentence = keyValue.replace(/(.+),$/, '$1');
          }            
          console.log("{\"operationName\":\"getEqualentCollections\",\"variables\":{\"collectionName\":["+sentence+"]},\"query\":\"query getEqualentCollections($collectionName: [String]!) {\\n  equalentCollections(collectionName: $collectionName) {\\n    classname\\n    label\\n    parentclassname\\n    parentclasslabel\\n  }\\n}\\n\"}");
          var tagArrayRelatedCategory = '';
          var settings = {
            "async": true,
            "crossDomain": true,
            "url": "{{ $.Site.Params.OWLApiUrl }}",
            "method": "POST",
            "headers": {
              "Content-Type": "application/json",
              "Accept": "*//*",
              "Cache-Control": "no-cache",
              "Host": "{{ $.Site.Params.OWLApiUrl }}",
              "accept-encoding": "gzip, deflate",
              "Connection": "keep-alive",
              "cache-control": "no-cache"
            },
            "processData": false,
            "data": "{\"operationName\":\"getEqualentCollections\",\"variables\":{\"collectionName\":["+sentence+"]},\"query\":\"query getEqualentCollections($collectionName: [String]!) {\\n  equalentCollections(collectionName: $collectionName) {\\n    classname\\n    label\\n    parentclassname\\n    parentclasslabel\\n  }\\n}\\n\"}"
          }
          $.ajax(settings).done(function (response) {
            console.log(response);
            let myArray = response.data.equalentCollections;     
            for(let i = 0; i < myArray.length; i++){
            tagArrayRelatedCategory += '\n { name:"'+myArray[i].parentclasslabel+': '+myArray[i].label+'", key:"'+ myArray[i].classname+'"},\n ';
          }
          tagArrayRelatedCategory =tagArrayRelatedCategory.replace(/(.+),$/, '$1');
          $('#relatedCategories').val(tagArrayRelatedCategory);
          });
        }  
        else{
        //alert("Please select the item");
        }
      });
      // To remove nested line break from the description and add HTML single break tag('<br />') starts here     
        var tagArray = '';
        var settings = {
          "async": true,
          "crossDomain": true,
          "url": "{{ $.Site.Params.OWLApiUrl }}?query={getClassHierarchy%28rootClassName:%22Collection%22,searchParam:%22%22%29{parentclassname%20parentclasslabel%20%20classname%20%20%20%20label%20%20%20%20%20subclassname%20%20%20%20%20subclasslabel}}",
          "method": "GET",
          "headers": {
            "Accept": "*/*",
            "Cache-Control": "no-cache",
            "Host": "{{ $.Site.Params.OWLApiUrl }}",
            "accept-encoding": "gzip, deflate",
            "Connection": "keep-alive",
            "cache-control": "no-cache"
          }
        }
        $.ajax(settings).done(function (response) {
          console.log(response);
          let myArray = response.data.getClassHierarchy;
          var catOption = '';
          for(let i = 0; i < myArray.length; i++){
            if(myArray[i].subclassname)
            {
              var label = myArray[i].parentclasslabel +": " +myArray[i].subclasslabel;
              var key = myArray[i].subclassname;
            }
              else if(myArray[i].classname)
              {
                var label = myArray[i].parentclasslabel +": " +myArray[i].label;
                var key = myArray[i].classname;
              }
              else
              {
                var label = myArray[i].parentclasslabel;
                var key = '';//myArray[i].parentclassname;
              }
              
          catOption +='<option value="'+label+ "$,"+key+'">'+label+'</option>';          
          }
          //console.log(catOption);
          $('#category').html(catOption);     
          var cateValue = $('#topichiddenValue').val();    
          cateValue = JSON.parse(cateValue);
          $('#category').val(cateValue);
          $('#category').select2();
        });
        var tagArray = '';
        var settings = {
          "async": true,
          "crossDomain": true,
          "url": "{{ $.Site.Params.OWLApiUrl }}?query={getClassHierarchy%28rootClassName:%22License%22,searchParam:%22%22%29{parentclassname%20parentclasslabel%20%20classname%20%20%20%20label%20%20%20%20%20subclassname%20%20%20%20%20subclasslabel}}",
          "method": "GET",
          "headers": {
            "Accept": "*/*",
            "Cache-Control": "no-cache",
            "Host": "{{ $.Site.Params.OWLApiUrl }}",
            "accept-encoding": "gzip, deflate",
            "Connection": "keep-alive",
            "cache-control": "no-cache"
          }
        }
        $.ajax(settings).done(function (response) {
        //console.log(response); 
          let myArray = response.data.getClassHierarchy;
          var catLicenseOption = '<option value="">Select license</option>';
          for(let i = 0; i < myArray.length; i++){
            if(myArray[i].label != null)
                catLicenseOption +='<option value="'+myArray[i].parentclasslabel+': '+myArray[i].label+'$,'+myArray[i].classname+'">'+myArray[i].parentclasslabel+': '+myArray[i].label+'</option>';
            else if(myArray[i].parentclasslabel != null)
            catLicenseOption +='<option value="'+myArray[i].parentclasslabel+'$,'+myArray[i].parentclassname+'">'+myArray[i].parentclasslabel+'</option>';
          }
          $('#openSourceLicense').html(catLicenseOption);    
        });
        // To remove nested line break from the description and add HTML single break tag('<br />') ends here
        /// Function to submit offering update starts
        function productFacetSubmit(){                  
          $('#productFacetsMessage').html("");
          $('#productFacetsMessage').removeClass('alert-success');
          $('#productFacetsMessage').removeClass('alert-danger');
          $('#productFacetsMessage').addClass('alert-primary');
          var offeringType = $("input[name='offeringItem']:checked").val().toUpperCase();//$('#offeringItem').val().toUpperCase();
          var offeringTypeMessage = $("input[name='offeringItem']:checked").val();//$('#offeringItem').val();
          var productName = $('#addProductName').val();
          productName = productName.replace(/"/g, "'");
          if ($("input[name='checkOwner']:checked").val() != true)
            var msg_var = 'The ';
          else
            var msg_var = 'Your ';
          var displ_msg = msg_var + offeringTypeMessage + " <b><i>" + productName + "</i></b> is being saved, please wait.";
          $('#productFacetsMessage').html(displ_msg);
          $('#productFacetsMessage').show();
          //$('#addProduct').attr("disabled", "disabled");
          $('#productProfile').removeClass('active');
          $('#loader-div').addClass('active');
          var checkOwner = $("input[name='checkOwner']:checked").val();//$('#checkOwner').val();
          if($('#category').val()!= null){
            var categoryArray = $('#category').val();
            var catCount = categoryArray.length;
            var category = '';
            for (i = 0; i < catCount; i++) {
              var splittedCategory = categoryArray[i].split('$,');
              category += '\n { name:"' + splittedCategory[0] + '", key:"' + splittedCategory[1] + '"},\n ';
            }
          }
          else{
              category = '\n { name:"", key:""},\n ';
          }     
          var shortDescription = $('#shortDescription').val();
          shortDescription = shortDescription.replace(/%/g, "percentage");
          shortDescription = base64EncodeUnicode(shortDescription);
          var featureProduct = $('#featureProduct').val();
          var createdOn = $('#createdOn').val() + 'T00:00:00+00:00';
          var link = $('#link').val();
          link = link.replace(/"/g, "'");
          //var businessModel = $('#businessModel').val();
          var licenseArray = $('#openSourceLicense').val();
          //var splittedLicense = licenseArray.split('$,');
          //var license = '{ key:"' + splittedLicense[1] + '", name:"' + splittedLicense[0] + '"}';
          if (licenseArray.length > 0){
            var splittedLicense = licenseArray.split('$,');
            var license = '{ key:"' + splittedLicense[1] + '", name:"' + splittedLicense[0] + '"}';
          }else{
                var license = '{ key:"", name:""}';
          }
          var githubUrl = $('#githubUrl').val();
          githubUrl = githubUrl.replace(/"/g, "'");
          var description = $('#description').val();
          description = description.replace(/%/g, "percentage");
          description = base64EncodeUnicode(description);
          var organization = $('#organization').val();
          organization = organization.replace(/"/g, "'");
          var contact = $('#contact').val().trim();
          contact = contact.replace(/"/g, "'");
          var permalink = $('#permalink').val();
          permalink = permalink.replace(/"/g, "'");
          var mediaUrl = ''; //$('#mediaUrl').val();
          var media = ''; //$('#media').val();
          var facebook = '';
          var twitter = '';
          var linkedin = '';
          var instagram = '';            
          var facebook = $('#facebook').val();
          facebook = facebook.replace(/"/g, "'");
          var twitter = $('#twitter').val();
          twitter = twitter.replace(/"/g, "'");
          var linkedin = $('#linkedin').val();
          linkedin = linkedin.replace(/"/g, "'");
          var instagram = $('#instagram').val();
          instagram = instagram.replace(/"/g, "'");              
          var sessionId = getCookie('sessionId');
          var hitStandards = '';
          $.each($("input[name='hitStandards']:checked"), function () {
            hitStandards += '\n { name:"' + $(this).val() + '"}\n ';
          });
          var fhirVersion = '';
          $.each($("input[name='fhirVersion']:checked"), function () {
            fhirVersion += '\n { name:"' + $(this).val() + '"}\n ';
          });       
          var fhriResourceSupport = '';
          $.each($("input[name='fhriResourceSupport']:checked"), function () {
            fhriResourceSupport += '\n { name:"' + $(this).val() + '"}\n ';
          });
          var hl7message = '';
          $.each($("input[name='hl7message']:checked"), function () {
            hl7message += '\n { name:"' + $(this).val() + '"}\n ';
          });
          var hl7version = '';
          $.each($("input[name='hl7version']:checked"), function () {
            hl7version += '\n { name:"' + $(this).val() + '"}\n ';
          });

          //var cdaversionArray = $('#cdaversion').val();
          var cdaversion = '';
          $.each($("input[name='cdaversion']:checked"), function () {
            cdaversion += '\n { name:"' + $(this).val() + '"}\n ';
          });

          var ccowversion = '';
          $.each($("input[name='ccowversion']:checked"), function () {
            ccowversion += '\n { name:"' + $(this).val() + '"}\n ';
          });    
          var vendorName = $('#vendorName').val();
          var vendorContact = $('#contactNumber').val();
          var vendorEmail = $('#contact').val();

          if (vendorEmail != '' && $('#addInstitutionStatus').val() == 1)
            var offeringTenantDetails = '\n   offeringTenantDetails:{\n      companyName:\"' + organization + '\"\n      workEmail:\"' + contact + '\"\n      ownerType:\"\"\n      companyType:\"\"\n      website:\"\"\n      workPhone:\"' + vendorContact + '\"\n    }\n'
          else {
            if ($("input[name='checkOwner']:checked").val() == 'true')
              var tenantId = $('#tenantId').val();
            else
              var tenantId = getCookie('tenantId'); // Set as default tenant (Netspective Communications)
            
            //var tenantId = '{{ .Params.tenantId }}';   
            var offeringTenantDetails = '\n   offeringOwnerTenant:\"' + tenantId + '\"\n';
          }
          if (vendorEmail == '')
            vendorEmail = getCookie('userEmail');
          var userEmail = getCookie('userEmail');
          var firstName = getCookie('firstname');
          var personid = getCookie('personid');
          var file_details = $("#file_details").val();
          var recognitionCount = $('#RecognitionCount').val();
          var recognition = 'offeringRecognitionsAndAwards:[';
          for (i = 0; i < recognitionCount; i++) {
            recognition += '{'
          }
         
          var response = grecaptcha.getResponse(recaptchaCommon);
          if (response.length == 0) {
            //reCaptcha not verified
            $('.captcha-message-common').show();
            $('#productFacetsMessage').removeClass('alert-success');
            $('#productFacetsMessage').removeClass('alert-primary');
            $('#productFacetsMessage').html("Please verify the captcha.");
            $('#productFacetsMessage').addClass('alert-danger');
            $('#addProduct').prop("disabled", false);
            $('#productProfile').addClass('active');
            $('#loader-div').removeClass('active');
            var enableStatus = 0;
            return false;
          }
          else {
            $('.captcha-message-common').hide();
            $('#addProduct').prop('disabled', true);
            var enableStatus =1;
          }
          
          var enableStatus = 1;
          var relatedCategory = $('#relatedCategories').val();
          if (relatedCategory == null) {
            var catSelectedValues = $("#category").val();
            if (catSelectedValues.length > 0) {
              var keyValue = '';
              for (let i = 0; i < catSelectedValues.length; i++) {
                var splittedOption = catSelectedValues[i].split('$,');
                keyValue += '"' + splittedOption[1] + '",';
                sentence = keyValue.replace(/(.+),$/, '$1');
              }
              console.log("{\"operationName\":\"getEqualentCollections\",\"variables\":{\"collectionName\":[" + sentence + "]},\"query\":\"query getEqualentCollections($collectionName: [String]!) {\\n  equalentCollections(collectionName: $collectionName) {\\n    classname\\n    label\\n    parentclassname\\n    parentclasslabel\\n  }\\n}\\n\"}");
              var tagArrayRelatedCategory = '';
              var settings = {
                "async": true,
                "crossDomain": true,
                "url": "{{ $.Site.Params.OWLApiUrl }}",
                "method": "POST",
                "headers": {
                  "Content-Type": "application/json",
                  "Accept": "*//*",
                  "Cache-Control": "no-cache",
                  "Host": "{{ $.Site.Params.OWLApiUrl }}",
                  "accept-encoding": "gzip, deflate",
                  "Connection": "keep-alive",
                  "cache-control": "no-cache"
                },
                "processData": false,
                "data": "{\"operationName\":\"getEqualentCollections\",\"variables\":{\"collectionName\":[" + sentence + "]},\"query\":\"query getEqualentCollections($collectionName: [String]!) {\\n  equalentCollections(collectionName: $collectionName) {\\n    classname\\n    label\\n    parentclassname\\n    parentclasslabel\\n  }\\n}\\n\"}"
              }
              $.ajax(settings).done(function (response) {
                console.log(response);
                let myArray = response.data.equalentCollections;
                for (let i = 0; i < myArray.length; i++) {
                  tagArrayRelatedCategory += '\n { name:"' + myArray[i].parentclasslabel + ': ' + myArray[i].label + '", key:"' + myArray[i].classname + '"},\n ';
                }
                tagArrayRelatedCategory = tagArrayRelatedCategory.replace(/(.+),$/, '$1');
                relatedCategory = tagArrayRelatedCategory;
              });
            }
            else {
              //alert("Please select the item");
            }
          }               
          var offeringId = $('#offeringId').val();
          console.log( "mutation{\n  updateOffering(offering:{\n   offeringId:\""+offeringId+"\"\n   offeringOwnerTenant:\""+tenantId+"\"\n   offeringType:"+offeringType+"\n    offeringName:\""+productName+"\"\n    offeringCreatedOn:\""+createdOn+"\" \n    offeringOwnerCheck: "+checkOwner+"\n    offeringDescription:\""+description+"\"\n    offeringShortDescription:\""+shortDescription+"\"\n    offeringOrganization:\""+organization+"\"\n    offeringVendorEmail:\""+vendorEmail+"\"\n  offeringVendorName:\""+vendorName+"\"\n   offeringVendorContact:\""+vendorContact+"\"\n offeringWebsite:\""+link+"\"\n    offeringLicense:"+license+"\n    offeringGitRepoLink:\""+githubUrl+"\"\n    offeringHealthItStandards:[ \n "+hitStandards+"\n    ]\n    offeringFhirVersions:[\n      "+fhirVersion+"\n]\n    offeringFhirSupportedResources:[\n"+fhriResourceSupport+"\n    ]\n     offeringHl7Versions:[\n"+hl7version+"\n    ]\n   offeringHl7SupportedMessages:[\n"+hl7message+"\n    ]\n       offeringCdaVersions:[\n"+cdaversion+"\n    ]\n       offeringCcowVersions:[\n"+ccowversion+"\n    ]\n   offeringCategories:[\n"+category+"\n    ]\n  offeringRelatedCategories:[\n"+relatedCategory+"\n    ]\n   offeringFacebookPage:\""+facebook+"\"\n    offeringTwitterPage:\""+twitter+"\"\n    offeringLinkedInPage:\""+linkedin+"\"\n    offeringInstagramPage:\""+instagram+"\"\n   },authorization:{\n    sessionID:\""+sessionId+"\"\n  }){\n    status\n    message\n    errorCode\n  }\n}");
          var settings = {
            "async": true,
            "crossDomain": true,
            "url": "{{ $.Site.Params.GraphQLUrl }}",
            "method": "POST",
            "headers": {
              "Content-Type": "application/x-www-form-urlencoded",
              "cache-control": "no-cache"
            },
            "data": {
              "query": "mutation{\n  updateOffering(offering:{\n   offeringId:\""+offeringId+"\"\n   offeringOwnerTenant:\""+tenantId+"\"\n   offeringType:"+offeringType+"\n    offeringName:\""+productName+"\"\n    offeringCreatedOn:\""+createdOn+"\" \n    offeringOwnerCheck: "+checkOwner+"\n    offeringDescription:\""+description+"\"\n    offeringShortDescription:\""+shortDescription+"\"\n    offeringOrganization:\""+organization+"\"\n    offeringVendorEmail:\""+vendorEmail+"\"\n  offeringVendorName:\""+vendorName+"\"\n   offeringVendorContact:\""+vendorContact+"\"\n offeringWebsite:\""+link+"\"\n    offeringLicense:"+license+"\n    offeringGitRepoLink:\""+githubUrl+"\"\n    offeringHealthItStandards:[ \n "+hitStandards+"\n    ]\n    offeringFhirVersions:[\n      "+fhirVersion+"\n]\n    offeringFhirSupportedResources:[\n"+fhriResourceSupport+"\n    ]\n     offeringHl7Versions:[\n"+hl7version+"\n    ]\n   offeringHl7SupportedMessages:[\n"+hl7message+"\n    ]\n       offeringCdaVersions:[\n"+cdaversion+"\n    ]\n       offeringCcowVersions:[\n"+ccowversion+"\n    ]\n   offeringCategories:[\n"+category+"\n    ]\n  offeringRelatedCategories:[\n"+relatedCategory+"\n    ]\n   offeringFacebookPage:\""+facebook+"\"\n    offeringTwitterPage:\""+twitter+"\"\n    offeringLinkedInPage:\""+linkedin+"\"\n    offeringInstagramPage:\""+instagram+"\"\n   },authorization:{\n    sessionID:\""+sessionId+"\"\n  }){\n    status\n    message\n    errorCode\n  }\n}"               
            }
          }
          var status ="Failed";
          $.ajax(settings).done(function (response) {
            if(response.data.updateOffering.status == "SUCCESS")
            {
              //$("#responseId").val(response.data.addOffering.message);
              var media_exist= $('#media').prop('files')[0];    
             var logo_exist= $('#logo_media').prop('files')[0];  
             var addofferingName = $('#addProductName').val();       
             addofferingName = addofferingName.replace(/[^a-z0-9\s]/gi, '').replace(/[_\s]/g, '-');
             addofferingName = addofferingName.toLowerCase(); 
             var projectdataId = $("#offeringId").val();  
             var imgName='';
             if(typeof (media_exist) != "undefined"){                
               if(projectdataId){
                  var content = $("#featured_img").val();
                  imgName= projectdataId+'.png';                                     
                  mediaUpload(imgName,content).then(function(featuredResult){
                    console.log("success featured image")
                    if(typeof (logo_exist) != "undefined"){ 
                      imgName= projectdataId+'-logo.png';
                      var content = $("#logo_img").val();
                      mediaUpload(imgName,content).then(function(logoResult){
                        console.log("success logo image");
                      })
                    }
                  })
               }else{
                  imgName= addofferingName+'.png';  
                  var content = $("#featured_img").val();
                  mediaUpload(imgName,content).then(function(featuredResult){
                    console.log("success featured image")
                     if(typeof (logo_exist) != "undefined"){ 
                    imgName= addofferingName+'-logo.png';
                    var content = $("#logo_img").val();
                    mediaUpload(imgName,content).then(function(logoResult){
                      console.log("success logo image");
                    })
                     }
                  })
               }                
             } else{
                  if(typeof (logo_exist) != "undefined"){ 
                    if(projectdataId){
                      imgName= projectdataId+'-logo.png';
                      var content = $("#logo_img").val();
                      mediaUpload(imgName,content).then(function(logoResult){
                        console.log("success logo image");
                      })
                    }else{
                       imgName= addofferingName+'-logo.png';
                       var content = $("#logo_img").val();
                      mediaUpload(imgName,content).then(function(logoResult){
                        console.log("success logo image");
                      })
                    }                   
                  }
             }
            // $("#productFacets")[0].reset();
              $('#productFacetsMessage').html("");
              $('#productFacetsMessage').removeClass('alert-danger');
              $('#productFacetsMessage').removeClass('alert-primary');
              //var splittedResponse = response.data.updateOffering.message.split('Submission ID -');
              //var secondSplit = splittedResponse[1].split('.');
              var displ_succ_msg = msg_var+offeringTypeMessage+" <b><i>"+productName+"</i></b/> has being submitted.<br /><br /> Our expert panel will review <b><i>"+productName+"</i></b> and notify you at <b><i>"+userEmail+"</i></b> when it's been published on the site. If you have questions in the meantime, please contact us via <b><a href='mailto:admin@medigy.com?subject=[Netspective Medigy] Question about \"" + productName + "\" SID \"" + response.data.updateOffering.message + "\"' target='blank'>e-mail</a></b> or <b>+1 202 660-1351</b>. You can use Submission ID <b>"+response.data.updateOffering.message+"</b> as reference.";
              //var displ_succ_msg = "Successfully updated";
              $('#productFacetsMessage').html(displ_succ_msg);
              $('#productFacetsMessage').addClass('alert-success');
              $('#addProduct').prop("disabled", false); 
              $('#productProfile').addClass('active');
              $('#loader-div').removeClass('active'); 
              $("#category").val('').trigger('change') ;  // Deselect "select2" plugin for categories
              grecaptcha.reset(recaptchaCommon); // to reset the reCaptcha                
              $('#addProductName').focus();   
              status = "Success";       
            }
            else
            {
              $('#productFacetsMessage').html("");
              $('#productFacetsMessage').removeClass('alert-success');
              $('#productFacetsMessage').removeClass('alert-primary');
              $('#productFacetsMessage').html("This Offering is not updated. "+ response.data.updateOffering.message);
              $('#productFacetsMessage').addClass('alert-danger');
              $('#addProduct').prop("disabled", false); 
              $('#productProfile').addClass('active');
              $('#loader-div').removeClass('active');
              $('#addProductName').focus();   
              status = "Failure:{"+response.data.updateOffering.message+"}";                
            }
            var userName = getCookie('userEmail');
            if(response.data.updateOffering.message == "Could not authenticate the session. Please try again.")
            {
              $('#productFacetsMessage').html("Unfortunately your session has expired and the offering could not be updated. We require you to log in again and submit the offering.");
                delete_cookie('firstname');
                delete_cookie('personid');                
                //delete_cookie('userEmail');                                 
                $('#userlogout').hide();
                $('#userlogin').show();
                $("#sessionname").html('');
                $("#sessionname").hide();
                $( ".addoffer-col" ).removeClass( "loggedinoffer" );
                callLogin();            
            }              
            $('#productFacetsMessage').show();
            gtmEditOffering(status,userName,offeringType,productName,link,githubUrl,vendorName,vendorContact,vendorEmail);
          });               
        } 
        $('#productFacets').on('submit', function (e) {
            if (e.isDefaultPrevented()) {
                alert('form is not valid');
            } 
            else {
              // everything looks good!
              e.preventDefault();
              var personid = getCookie('personid');
                if (personid != null) {
                    $('#addProductName').removeClass('utf-valid-red');
                    $('#description').removeClass('utf-valid-red');
                    $('#shortDescription').removeClass('utf-valid-red');
                    var fieldname ="";
                    var nameStatus = containsNonLatinCodepoints($("#addProductName").val());
                    var descrStatus = containsNonLatinCodepoints($("#description").val());
                    var shortDescrStatus = containsNonLatinCodepoints($("#shortDescription").val());
                    var enableEdit = 1;
                    if (nameStatus == false){
                      fieldname ="Offering name";
                      enableEdit = 0;
                      $('#addProductName').addClass('utf-valid-red'); 
                      $(".validOfferingName").html("We found few invalid characters in the " + fieldname + ". If you copy pasted the text directly from the offering website, chances are that few characters may not be in proper Unicode character format and so you will need to copy the text to a plain text or markdown editor, format it properly and then copy paste to the text box. If you use Grammarly, that would be even better to ensure that the description is correct in all aspects.").show();                                                   
                    }
                    if (descrStatus == false){
                      fieldname ="description";
                      enableEdit = 0;
                      $('#description').addClass('utf-valid-red'); 
                      $(".validDescription").html("We found few invalid characters in the " + fieldname + ". If you copy pasted the text directly from the offering website, chances are that few characters may not be in proper Unicode character format and so you will need to copy the text to a plain text or markdown editor, format it properly and then copy paste to the text box. If you use Grammarly, that would be even better to ensure that the description is correct in all aspects.").show();                                                               
                    }
                    if(shortDescrStatus == false){
                      enableEdit = 0;
                      fieldname ="one liner description";
                      $('#shortDescription').addClass('utf-valid-red');
                      $(".validShortDescription").html("We found few invalid characters in the " + fieldname + ". If you copy pasted the text directly from the offering website, chances are that few characters may not be in proper Unicode character format and so you will need to copy the text to a plain text or markdown editor, format it properly and then copy paste to the text box. If you use Grammarly, that would be even better to ensure that the description is correct in all aspects.").show();                                                   
                    }
                    
                    // if(fieldname !=""){              
                    //   $('#productFacetsMessage').html("");
                    //   $('#productFacetsMessage').removeClass('alert-success');
                    //   $('#productFacetsMessage').removeClass('alert-primary');
                    // // $('#productFacetsMessage').html("We found few invalid characters in the " + fieldname + ". If you copy pasted the text directly from the offering website, chances are that few characters may not be in proper Unicode character format and so you will need to copy the text to a plain text or markdown editor, format it properly and then copy paste to the text box. If you use Grammarly, that would be even better to ensure that the description is correct in all aspects.");
                    //   $('#productFacetsMessage').addClass('alert-danger');
                    // // $('#productFacetsMessage').show();
                    //   // $('#addProductName').focus();  
                    // }
                    if (!is_url($('#link').val())) {
                        $('.validLink').show();
                        enableEdit = 0;
                        // $('#link').focus();
                        $('#link').addClass('utf-valid-red');                 
                    }
                  if ($("#facebook").val() != '' && (!is_url($('#facebook').val()))) {
                      $('.validLinkFacebook').show();
                        $('#facebook').addClass('utf-valid-red');
                      enableEdit = 0;
                    }
                    if ($("#twitter").val() != '' && (!is_url($('#twitter').val()))) {
                        $('#twitter').addClass('utf-valid-red');
                        $('.validLinkTwitter').show();
                        enableEdit = 0;                  
                    }
                    if ($("#githubUrl").val() != '' && (!is_url($('#githubUrl').val()))) {
                        $('#githubUrl').addClass('utf-valid-red');
                        $('.validLinkGit').show();
                        enableEdit = 0;                   
                    }
                    if ($("#linkedin").val() != '' && (!is_url($('#linkedin').val()))) {
                        $('.validLinkLinkedin').show();
                        $('#linkedin').addClass('utf-valid-red');
                        enableEdit = 0;             
                    }
                    if ($("#instagram").val() != '' && (!is_url($('#instagram').val()))) {
                        $('.validLinkInstagram').show();
                        enableEdit = 0;
                        $('#instagram').addClass('utf-valid-red');             
                    }
                    if( enableEdit == 0){
                      var r = confirm("There are few open issues that should be corrected to improve data quality of this offering. Do you want to save this offering with open issues?" );
                      if (r == true) {
                        productFacetSubmit();                 
                        $('#addProductName').focus(); 
                       // $('#remainDescrChar').hide();
                        //$('#remainShortDescrChar').hide();
                      }else{             
                        $('#addProductName').focus(); 
                      //  $('#remainDescrChar').hide();
                        //$('#remainShortDescrChar').hide();
                        return false;
                      }
                    }
                    else{ 
                      productFacetSubmit();  
                    }         
                } else {
                    $('#productFacetsMessage').html("");
                    $('#productFacetsMessage').removeClass('alert-success');
                    $('#productFacetsMessage').removeClass('alert-primary');
                    $('#productFacetsMessage').html("This Offering is not updated. Your session is expired.Please try again after login.");
                    $('#productFacetsMessage').addClass('alert-danger');
                    $('#addProduct').prop("disabled", false); 
                    $('#productProfile').addClass('active');
                    $('#loader-div').removeClass('active');
                    $('#addProductName').focus();   

                    $('#userlogout').hide();
                    $('#userlogin').show();
                    $( ".addoffer-col" ).removeClass( "loggedinoffer" );
                    var productName = $('#addProductName').val();
                    status = "Failure:{Cookie expired}";
                    var userName = getCookie('userEmail');
                    var link = $('#link').val();
                    link = link.replace(/"/g, "'");
                    var githubUrl = $('#githubUrl').val();
                    githubUrl = githubUrl.replace(/"/g, "'");
                    var vendorName = $('#vendorName').val();
                    var vendorContact = $('#contactNumber').val();
                    var vendorEmail = $('#contact').val();
                    gtmEditOffering(status,userName,offeringType,productName,link,githubUrl,vendorName,vendorContact,vendorEmail);
                    callLogin();
                }
            }
        });
        function gtmEditOffering(status,userName,offeringType,productName,link,githubUrl,vendorName,vendorContact,vendorEmail){
          console.log(productName+'-'+userName+'-'+status+'-'+offeringType+'-'+productName+'-'+link+'-'+githubUrl+'-'+vendorName+'-'+vendorContact+'-'+vendorEmail);
          window.dataLayer.push({
          'gtmofferingType':offeringType,
          'gtmOfferingTitle':productName,
          'gtmWebsite':link,
          'gtmgitHubUrl':githubUrl,
          'gtmUserName':userName,
          'gtmOfferingStatus':status,
          'gtmvendorName':vendorName,
          'gtmvendorContact':vendorContact,
          'gtmvendorEmail':vendorEmail,
          'event': 'eventOffering'
          }); 
        }
        //media upload
    $("#media").change(function() {
      var reader = new FileReader();
      reader.readAsDataURL(this.files[0]);
      reader.onload = function(e) {    
        var content =e.target.result;         
        const base64 = content.split('base64,').pop();
        $("#featured_img").val(base64) ;   
      }
    });
    $("#logo_media").change(function() {
      var reader = new FileReader();
      reader.readAsDataURL(this.files[0]);
      reader.onload = function(e) {
       var content =e.target.result;         
       const base64 = content.split('base64,').pop();
       $("#logo_img").val(base64) ;   
      }
    });
    //media upload
    // function mediaUpload(imgtype){
    const convertToBase64= function (path) {
      return new Promise((resolve, reject) => {
          var reader = new FileReader();
          reader.readAsDataURL(path);
          reader.onload = function(e) {
            resolve(e.target.result)      
          }
      });
    }
      
    const mediaUpload= function (imgName,content) {
      return new Promise((resolve, reject) => {        
        gitlab_url = {{ $.Site.Params.gitlabUrl }} 
        const base64= content;    
        // const base64 = content.split('base64,').pop();
        var sessionId = getCookie('sessionId');
        var projectdataId = $("#offeringId").val();
        const filePath = 'uploads/' + imgName;
        
        const uploadApi =gitlab_url +'/projects/' +projectdataId +'/repository/files/' +encodeURIComponent(filePath)+'?ref=draft&access_token='+sessionId;
        getDataFromGit(uploadApi).then(function(imageResponse){
          $("#productFacets")[0].reset();        
          let method = 'create';
          const userEmail = getCookie('userEmail');
          const userFullName = getCookie('firstname');
         
          if (typeof imageResponse.message != 'string') {
            method = 'update';
          }
          const postData = {
          id: projectdataId,
          branch: 'draft',
          author_email: userEmail,
          author_name: userFullName,
          file_name: imgName,
          commit_message: 'attachment added',
          actions: [
          {
          action: method,
          file_path: filePath,
          content: base64,
          encoding: 'base64',
          },
          ],
          };
          const commitUrl =gitlab_url +'/projects/' +projectdataId +'/repository/commits';
          postToGit(postData, commitUrl, 'POST').then((res) => {           
          resolve(res);
          });
        });
      });
   }
       
    const getDataFromGit= function (apiUrl) {
       return new Promise((resolve, reject) => {
          fetch(apiUrl, {
          method: 'GET',
          headers: {
          Accept: 'application/json',
          'Content-Type': 'application/json',
          },
        })
        .then((res) => res.json())
        .then((response) => {
        resolve(response);
        })
        .catch((error) => {
          resolve(null);
        });
      });
    }
   const postToGit= (postData, url, method) => {
    return new Promise((resolve, reject) => {
      const aceessToken = getCookie('sessionId');
      fetch(url, {
        method: method,
        headers: {
          Accept: 'application/json',
          'Content-Type': 'application/json',
          Authorization: 'Bearer ' + aceessToken,
        },
        body: JSON.stringify(postData),
      })
        .then((res) => res.json())
        .then((response) => {
          resolve(response);
        })
        .catch((error) => {
          resolve(null);
        });
    });
    }

        $("input[name='checkOwner']").click(function (e) {
          $('#socialPresence').show();
          var currValue = $(this).val();
          if (currValue == 'true') {
            $('#tenantId').attr('required', 'required');
            $('#tenantDetailDiv').show();
            var tenantId = $('#tenantId').val()
            setTenantDetails(tenantId);
            $('#addInstitutionStatus').val(0);
            $('.vendorInfo').hide();
          }
          else {
            $('#organization').removeAttr('required');
            $('#organization').val('');
            $('#vendorName').val('');
            $('#tenantId').removeAttr('required');
            $('#contactNumber').removeAttr('required');
            $('#contactNumber').val('');
            $('#contact').removeAttr('required');
            $('#contact').val('');
            $('#tenantDetailDiv').hide();
            $('.vendorInfo').show();
          }

        });
        $('.vendorInfoClick').on("click", function (e) {
          $('#tenantId').removeAttr('required');
          $('#organization').attr('required', 'required');
          $('#contactNumber').attr('required', 'required');
          $('#contact').attr('required', 'required');
          $('#addInstitutionStatus').val(1);
          $('#tenantDetailDiv').hide();

          $('.vendorInfo').show();
        });
        $('#openSourceLicense').on("change", function (e) {

          if ($('#openSourceLicense').val() != 'Commercial$,Commercial')
            $('.gitRepo').show();
          else
            $('.gitRepo').hide();
        });
        $(".radioOfferingItem").change(function () {

          if ($("input[name='offeringItem']:checked").val() != 'Service')
            $('#opensourcelicenseCheck').show();
          else {
            $('#opensourcelicenseCheck').hide();
          }


        });
        $(".radioCheckOpensourcelicense").change(function () {
          if ($("input[name='checkOpensourcelicense']:checked").val() == 'true')
            $('#opensourceDiv').show();
          else
            $('#opensourceDiv').hide();

        });
        /// Checking the required fields are filled:- starts here
        $('.add-new-product-col').on('click', function () {
          var enableStatus = 1;
          if ($("input[name='offeringItem']:checked").val() != undefined) {
            if ($("#addProductName").val() != '') {
              if ($("#link").val() != '' && (is_url($('#link').val()))) {
                if ($("#description").val() != '') {
                  if ($("input[name='checkOwner']:checked").val() != undefined)
                    enableStatus = 1;
                }

              }
            }
          }
          if (enableStatus == 1) {
            $("#recaptchaCommon").show();
            $("#addProduct").removeAttr('disabled');
            $(".submitButtonOverlay").hide();

          }
          else {
            $("#recaptchaCommon").hide();
            $("#addProduct").attr("disabled", "disabled");
            $(".submitButtonOverlay").show();
          }
        });
        /// Checking the required fields are filled:- ends here
        $(".submitButtonOverlay").hide();
    }); 
</script>
<script>
  $(document).ready(function () {
    // vaidation message display
    setTimeout(function() {
      $('#description').removeClass('utf-valid-red');
      $('#shortDescription').removeClass('utf-valid-red');
      var fieldname ="";
      var nameStatus = containsNonLatinCodepoints($("#addProductName").val());
      var descrStatus = containsNonLatinCodepoints($("#description").val());
      var shortDescrStatus = containsNonLatinCodepoints($("#shortDescription").val());
      if (nameStatus == false){
        fieldname ="Offering name";
        enableEdit = 0;
        $('#addProductName').addClass('utf-valid-red'); 
        $(".validOfferingName").html("We found few invalid characters in the " + fieldname + ". If you copy pasted the text directly from the offering website, chances are that few characters may not be in proper Unicode character format and so you will need to copy the text to a plain text or markdown editor, format it properly and then copy paste to the text box. If you use Grammarly, that would be even better to ensure that the description is correct in all aspects.").show();                                                   
      }
      if (descrStatus == false){
        fieldname ="description";
        enableEdit = 0;
        $('#description').addClass('utf-valid-red'); 
        $(".validDescription").html("We found few invalid characters in the " + fieldname + ". If you copy pasted the text directly from the offering website, chances are that few characters may not be in proper Unicode character format and so you will need to copy the text to a plain text or markdown editor, format it properly and then copy paste to the text box. If you use Grammarly, that would be even better to ensure that the description is correct in all aspects.").show();                                                               
      }
      if(shortDescrStatus == false){
        enableEdit = 0;
        fieldname ="one liner description";
        $('#shortDescription').addClass('utf-valid-red');
        $(".validShortDescription").html("We found few invalid characters in the " + fieldname + ". If you copy pasted the text directly from the offering website, chances are that few characters may not be in proper Unicode character format and so you will need to copy the text to a plain text or markdown editor, format it properly and then copy paste to the text box. If you use Grammarly, that would be even better to ensure that the description is correct in all aspects.").show();                                                   
      }
      
    // if(fieldname !=""){              
    //   $('#productFacetsMessage').html("");
    //   $('#productFacetsMessage').removeClass('alert-success');
    //   $('#productFacetsMessage').removeClass('alert-primary');
    // // $('#productFacetsMessage').html("We found few invalid characters in the " + fieldname + ". If you copy pasted the text directly from the offering website, chances are that few characters may not be in proper Unicode character format and so you will need to copy the text to a plain text or markdown editor, format it properly and then copy paste to the text box. If you use Grammarly, that would be even better to ensure that the description is correct in all aspects.");
    //   $('#productFacetsMessage').addClass('alert-danger');
    // // $('#productFacetsMessage').show();
    //   // $('#addProductName').focus();  
    // }
      if (!is_url($('#link').val())) {
          $('.validLink').show();
          enableEdit = 0;
          // $('#link').focus();
          $('#link').addClass('utf-valid-red');                 
      }
    if ($("#facebook").val() != '' && (!is_url($('#facebook').val()))) {
        $('.validLinkFacebook').show();
          $('#facebook').addClass('utf-valid-red');
        enableEdit = 0;
        // $('#facebook').focus(); 
      }
      if ($("#twitter").val() != '' && (!is_url($('#twitter').val()))) {
          $('#twitter').addClass('utf-valid-red');
          $('.validLinkTwitter').show();
          enableEdit = 0;               
      }
      if ($("#linkedin").val() != '' && (!is_url($('#linkedin').val()))) {
          $('.validLinkLinkedin').show();
          $('#linkedin').addClass('utf-valid-red');
          enableEdit = 0;             
      }
      if ($("#instagram").val() != '' && (!is_url($('#instagram').val()))) {
          $('.validLinkInstagram').show();
          enableEdit = 0;
          $('#instagram').addClass('utf-valid-red');              
      }
      if ($("#githubUrl").val() != '' && (!is_url($('#githubUrl').val()))) {
          $('#githubUrl').addClass('utf-valid-red');
          $('.validLinkGit').show();
          enableEdit = 0;               
      }
      if( enableEdit == 0){                  
          $('#addProductName').focus(); 
          return false;     
      }
    }, 2000);

    $("#contactNumber").keypress(function (e) {
     //if the letter is not digit then display error and don't type anything
     if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
        //display error message
        $("#errmsg").html("Please enter a valid contact number").show();
               return false;
      }
      else{
        $("#errmsg").hide();
      }
    });
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth() + 1; //January is 0!
    var yyyy = today.getFullYear();

    if (dd < 10) {
      dd = '0' + dd;
    }

    if (mm < 10) {
      mm = '0' + mm;
    }

    today = yyyy + '-' + mm + '-' + dd;
    $('#createdOn').val(today);


    $('#businessModel').on("change", function () {
      var businessModel = $('#businessModel').val();
      if (businessModel != 'Open Source (Free)' && businessModel != 'Open Source (Freemium)')
        $('#opensourceDiv').hide();
        //$('#openSourceLicense').prop("disabled", true);
      else
        $('#opensourceDiv').show();
        //$('#openSourceLicense').prop("disabled", false);
    });

      var personid = getCookie('personid');

      if (personid == null) {
        window.location.href = "/";
      }

    //$('#hitStandards').on("change", function () {
      $("input[name='hitStandards']").click(function () {
      var hitStandardsArray = [];//$("input[name='hitStandards']").val();

      $.each($("input[name='hitStandards']:checked"), function () {
        hitStandardsArray.push($(this).val());
      });
      var hitStandardsCount = hitStandardsArray.length;
      $('#fhirDiv').hide();
      $('#hl7Div').hide();
      $('#cdaDiv').hide();
      $('#ccowDiv').hide();
      for (i = 0; i < hitStandardsCount; i++) {
        if (hitStandardsArray[i] == 'FHIR')
          $('#fhirDiv').show();
        if (hitStandardsArray[i] == 'HL7')
          $('#hl7Div').show();
        if (hitStandardsArray[i] == 'CDA')
          $('#cdaDiv').show();
        if (hitStandardsArray[i] == 'CCOW')
          $('#ccowDiv').show();
      }
    });

    //$('#offeringItem').on("change", function () {
    $("input[name='offeringItem']").click(function () {
      var offeringItem = $("input[name='offeringItem']:checked").val(); //$('#offeringItem').val();
      if (offeringItem == '')
        offeringItem = 'Offering';
      $('span.replace-it').html(offeringItem);
      var titleCategoryValue = 'Please select the best suited topics for your ' + offeringItem;
      $('#category').attr('title', titleCategoryValue);
      var descriptionTitle = 'What problem does your ' + offeringItem + ' solve? What does your customer gain from using your ' + offeringItem + '? What separates your ' + offeringItem + ' from others on the market? Your brief description needs to answer these questions in a way that is easy to read.'
      $('#descriptionTooltip').attr('title', descriptionTitle);
    });
 

});


</script>

<body class="single-body">

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ $.Site.Params.GTMCode }}"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  {{ partial "nav-bar.html" . }}


  <script>
  //Set teant details starts here
  function setTenantDetails(Id){
    var sessionId = getCookie('sessionId');
    var Id = getCookie('tenantId');
      if(sessionId != null && Id != null)
      {

        var settings = {
          "async": true,
          "crossDomain": true,
          "url": "{{ $.Site.Params.GraphQLUrl }}",
          "method": "POST",
          "headers": {
            "Content-Type": "application/x-www-form-urlencoded",
            "cache-control": "no-cache"
          },
          "data": {
            "query": "query{\n  getInstitutionalProfile(authorization:{\n    sessionID:\""+sessionId+"\"\n  },institutionId:\""+Id+"\"){\n    ownerType\n    ownerJobTitle\n    companyLogo\n    companyName\n    incorporationDate\n    companyType\n    registrationNumber\n    industry\n    currency\n    netWorth\n    companySize\n    website\n    workEmail\n    workPhone\n    anotherPhone\n    addressHouseBuilding\n    addressTownCity\n    addressStateProvince\n    addressZipPostalCode\n    addressCountryRegion\n  }\n}"
          }
        }

        $.ajax(settings).done(function (response) {
          console.log(response);
          if(response.data.getInstitutionalProfile.companyName!=null)
          {
           // $('#website').val(response.data.getInstitutionalProfile.website);
            $('#contact').val(response.data.getInstitutionalProfile.workEmail);
            $('#contactNumber').val(response.data.getInstitutionalProfile.workPhone);
            //$('#organization').val(response.data.getInstitutionalProfile.companyName);
          }

        });
        $('#vendorName').val(getCookie('firstname'))

    }
  }

  //Set teant details ends here


$(document).ready(function(){ 

  var maxDescriptionchars = 500;
    $('#description').keyup(function () {
        $('.remainDescrChar').show();
        var tlength = $(this).val().length;
        $(this).val($(this).val().substring(0, maxDescriptionchars));
        var tlength = $(this).val().length;
        remain = maxDescriptionchars - parseInt(tlength);
        $('#remainDescrChar').text(remain);
    });
    var maxShortDescriptionchars = 140;
    $('#shortDescription').keyup(function () {
        $('.remainShortDescChar').show();        
        var tlength = $(this).val().length;
        $(this).val($(this).val().substring(0, maxShortDescriptionchars));
        var tlength = $(this).val().length;
        remain = maxShortDescriptionchars - parseInt(tlength);
        $('#remainShortDescChar').text(remain);
    });
    $(".radioCheckOpensourcelicense").change(function () {
      if ($("input[name='checkOpensourcelicense']:checked").val() == 'true')
        $('#opensourceDiv').show();
      else
        $('#opensourceDiv').hide();

    });

});              

/*
$(window).bind("load", function () {
  console.log(base64EncodeUnicode($('#description').val()));

console.log('****************************************');
console.log($('#description').val());
});
*/
   </script>
  <section class="about-wrapper">
    <main class="container search-result-row">
      <article class="post {{ if ne .Params.dropcap false }}dropcase{{ end }}">
        <div id="productFacetsMessage" class="alert alert-success"></div>
        <header class="post-header">
          <h1 class="post-title">Edit Offering</h1>
        </header>
         
        <div class="companies-lists mr-3 insti-list-position" style="display: none;">
          <select name="tenantDetails" id="tenantDetails" class="form-control company-select">
          </select>
        </div>

        <div class="entry-content entry-content-2 page-content">
          <div class="row">
            <div class="col-sm-12">

              <article class="add-new-product-row">
                <!--
<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#profile" role="tab" aria-controls="home" aria-selected="true">Profile</a>
  </li>
  <li class="nav-item">
    <a class="nav-link"  data-toggle="tab" href="#standards" role="tab" aria-controls="profile" aria-selected="false">Standards</a>
  </li>
</ul>
-->
                <div class="tab-content" id="myTabContent">
                  <!-- Profile tab starts ::::::::::::::::::::::::::::::::::: -->
                  <div class="tab-pane fade show " id="loader-div" role="tabpanel">
                    <div class="lds-roller">
                      <div></div>
                      <div></div>
                      <div></div>
                      <div></div>
                      <div></div>
                      <div></div>
                      <div></div>
                      <div></div>
                      <br />
                      <br />
                      <br />
                      <span class="please-wait">Please wait.... </span>
                      </div>
                      
                  </div>
                  <div class="tab-pane fade show active" id="productProfile" role="tabpanel">
                    <form name="productFacets" id="productFacets" action="#">
                      <input type="hidden" name="offeringId" id="offeringId" />
                      <input type="hidden" name="topichiddenValue" id="topichiddenValue" />
                      <section class="add-new-product-col">
                        <aside>

                          <div class="form-group row">
                            <label class="col-md-5">Type of offering that you are submitting
                              <span class="label-required">(required)</span>
                              <div class="arrow_box_addOffering" id="offeringItemInfoMessageBox">
                                <h4>Product </h4>
                                <span>In marketing, a product is an object or system made available for consumer use; it is anything
                                  that can be offered to a market to satisfy the desire or need of a customer.</span>
                                <br />
                                <h4>Solution</h4>
                                <span>A solution is the application of a product to solve a specific industry need or business
                                  problem.</span>
                                  <br />
                                <h4>Service</h4>
                                <span>A service is an intangible item, which arises from the output of one or more individuals.</span>
                              </div>
                              <a class="infoTooltip" data-id="offeringItemInfoMessageBox" href="javascript:void(0);" data-toggle="tooltip" title="">
                                <i class="fas fa-question-circle"></i>
                              </a>
                            </label>
                            <div class="col-md-2">
                              <label class="input-container radioOfferingItem">Product
                                <input type="radio" name="offeringItem" value="Product" required/>
                                <span class="checkmark"></span>
                              </label>
                            </div>
                            <div class="col-md-2">
                              <label class="input-container radioOfferingItem">Solution
                                <input type="radio" name="offeringItem" value="Solution" required/>
                                <span class="checkmark"></span>
                              </label>
                            </div>
                            <div class="col-md-2">
                              <label class="input-container radioOfferingItem">Service
                                <input type="radio" name="offeringItem" value="Service" required/>
                                <span class="checkmark"></span>
                              </label>

                            </div>
                          </div>
                          <!--- Replacing div for offering starts here-->
                          <div class="replaceOffering">
                            <div id="basicOfferingEdit">
                              <fieldset>
                                <legend>Basic information about your
                                  <span class="capital-case replace-it">Offering</span>
                                </legend>

                                <div class="form-group row">
                                  <label class="col-md-5">
                                    <span class="replace-it">Offering</span> name
                                    <span class="label-required">(required)</span>
                                  </label>
                                  <div class="col-md-7">
                                    <input type="text" class="form-control" placeholder="Enter name" name="addProductName" id="addProductName" required>
                                    <span class="errorCustomMessage validOfferingName"></span>
                                  </div>
                                </div>

                                <div class="form-group row">
                                  <label class="col-md-5">Website of the
                                    <span class="replace-it">offering</span>
                                    <span class="label-required">(required)</span>
                                  </label>
                                  <div class="col-md-7">
                                    <input type="text" name="link" id="link" class="form-control" placeholder="Enter link" required>
                                    <span class="errorCustomMessage validLink">Please enter a valid website link.</span>
                                  </div>
                                </div>

                                <div class="form-group row">

                                  <div class="col-md-5">
                                    <label>Describe the key benefits and unique value proposition of the
                                      <span class="replace-it">offering</span>
                                      <span class="label-required">(required)</span>
                                      <div class="arrow_box_addOffering" id="descriptionInfoMessageBox">What problem does the offering solve?
                                        <br />What does the customer gain from using the offering?
                                        <br />What separates the offering from others on the market? </div>
                                      <a class="infoTooltip" data-id="descriptionInfoMessageBox" href="javascript:void(0);" data-toggle="tooltip" title="">
                                        <i class="fas fa-question-circle"></i>
                                      </a>
                                    </label>
                                  </div>
                                  <div class="col-md-7">
                                    <textarea name="description" id="description" class="form-control" placeholder="Enter description" required style="height:150px;"></textarea>
                                    <div class="maxChar">
                                        <span id="remainDescrChar" class="remainDescrChar errorCustomMessage error-utf-msg" style="display:none">500</span><span class="remainDescrChar errorCustomMessage" style="display:none"> characters remaining</span>
                                        <span class="errorCustomMessage validDescription"></span>
                                    </div>
                                  </div>

                                </div>
                              </fieldset>
                            </div>

                            <div id="moreAboutOfferingEdit">
                              <fieldset>
                                <legend>Tell us more about your
                                  <span class="capital-case replace-it">Offering</span>
                                </legend>
                                <div class="form-group row">
                                    <label class="col-md-5">Select the topics that best describe the
                                      <span class="replace-it">offering</span>
                                      <div class="arrow_box_addOffering arrow_box_category_addOffering" id="categoryInfoMessageBox"> You can choose multiple elements by Ctrl or Shift clicking items</div>
                                      <a class="infoTooltip" data-id="categoryInfoMessageBox" href="javascript:void(0);" data-toggle="tooltip">
                                        <i class="fas fa-question-circle"></i>
                                      </a>
                                      <span class="label-optional">(Optional)</span>
                                    </label>
                                    <div class="col-md-7">
                                      <select class="form-control" name="category" id="category" multiple title="Please select the best suited topics for your offering">
  
                                      </select>

                                      <input type="hidden" id="relatedCategories">
                                      <span class="green"><a href="/add-suggest" class="green pull-right" id="AddTopic_Top" title="Suggest more topics other than the available list">&nbsp;<b>Suggest Topics</b></a></span>                                      
                                      <div class="clearfix"></div>
                                    </div>
                                  </div>
                                <div class="form-group row" >
                                  <label class="col-md-5">A one liner describing the
                                    <span class="replace-it">offering</span>
                                  </label>
                                  <div class="col-md-7">
                                    <textarea name="shortDescription" id="shortDescription" class="form-control" placeholder="Enter short description"></textarea>
                                    <div class="maxChar">
                                        <span id="remainShortDescChar" class="remainShortDescChar errorCustomMessage error-utf-msg" style="display:none">140</span><span class="remainShortDescChar errorCustomMessage" style="display:none"> characters remaining</span>
                                        <span class="errorCustomMessage validShortDescription"></span>
                                    </div>
                                  </div>
                                </div>

                                <div class="form-group row" id="opensourcelicenseCheck">

                                  <label class="col-md-5">Is this
                                    <span class="replace-it">offering</span> Opensource?
                                    <span class="label-optional">(Optional)</span>
                                  </label>

                                  <div class="col-md-2">
                                    <label class="input-container radioCheckOpensourcelicense">Yes
                                      <input type="radio" name="checkOpensourcelicense" value="true" />
                                      <span class="checkmark"></span>
                                    </label>
                                  </div>
                                  <div class="col-md-2">
                                    <label class="input-container radioCheckOpensourcelicense">No
                                      <input type="radio" name="checkOpensourcelicense" value="false" />
                                      <span class="checkmark"></span>
                                    </label>
                                  </div>
                                </div>

                                <div class="form-group row " id="opensourceDiv" style="display: none;">

                                  <label class="col-md-5">Open Source license of the
                                    <span class="replace-it">offering</span>
                                    <span class="label-optional">(Optional)</span>
                                    <div class="arrow_box_addOffering" id="openSourceLicenseInfoMessageBox">What problem does the offering solve?
                                      <br />What does the customer gain from using the offering?
                                      <br />What separates the offering from others on the market? </div>
                                    <a id="openSourceLicenseTooltip" href="#" data-toggle="tooltip" title="">
                                      <i class="fas fa-question-circle"></i>
                                    </a>
                                  </label>
                                  <div class="col-md-7">
                                    <select class="form-control" id="openSourceLicense" name="openSourceLicense[]" title="Select">
                                    </select>
                                  </div>
                                </div>
                                <div class="form-group row gitRepo" >
                                  <label class="col-md-5">GIT repository link of the
                                    <span class="replace-it">offering</span>
                                    <span class="label-optional">(Optional)</span>
                                  </label>
                                  <div class="col-md-7">
                                    <input id="githubUrl" name="githubUrl" type="text" class="form-control" placeholder="Enter Github URL">
                                    <span class="errorCustomMessage validLinkGit">Please enter a valid website link.</span>
                                  </div>
                                </div>

                                <div class="form-group row">
                                  <div class="col-md-5">
                                    <label>Please upload a featured image for your
                                      <span class="replace-it">offering</span>
                                      <div class="arrow_box_addOffering" id="mediaInfoMessageBox">We prefer a decent quality image (Photos should be smaller than 1 MB and saved as JPG,
                                        PNG or GIF files) that is 590px wide and 300px tall so that it shows up good and
                                        consistent on listing and detail pages</div>
                                      <a class="infoTooltip" data-id="mediaInfoMessageBox" href="javascript:void(0);" data-toggle="tooltip">
                                        <i class="fas fa-question-circle"></i>
                                      </a>
                                      <span class="label-optional">(Optional)</span>
                                    </label>
                                  </div>
                                  <div class="col-md-7">
                                    <input id="media" name="media" type="file" class="form-control" placeholder="Enter Permalink">
                                      <input type="hidden" id="featured_img"/>
                                  </div>
                                  <!--<div class="col-md-2">
                                    <input id="media_upload" name="media_upload" type="button" value="Upload" class="btn btn-primary add-new-bt full-width">
                                  </div>-->
                                  <div class="col-md-5"></div>
                                  <div class="col-md-7">
                                    <span style="font-size: 12px;">(Photos should be smaller than 1 MB and saved as JPG, PNG or GIF files)</span>
                                  </div>
                                  <input type="hidden" name="file_details" id="file_details" />
                                </div>
                                <div class="form-group row">
                                        <div class="col-md-5">
                                          <label>Please upload a logo image for your
                                            <span class="replace-it">offering</span>
                                            <div class="arrow_box_addOffering" id="mediaInfoMessageBox">We prefer a decent quality image (Photos should be smaller than 1 MB and saved as JPG,
                                              PNG or GIF files) that is 590px wide and 300px tall so that it shows up good and
                                              consistent on listing and detail pages</div>
                                            <a class="infoTooltip" data-id="mediaInfoMessageBox" href="javascript:void(0);" data-toggle="tooltip">
                                              <i class="fas fa-question-circle"></i>
                                            </a>
                                            <span class="label-optional">(Optional)</span>
                                          </label>
                                        </div>
                                        <div class="col-md-7">
                                          <input id="logo_media" name="logo_media" type="file" class="form-control" placeholder="Enter Permalink">
                                          <input type="hidden" id="logo_img"/>

                                        </div>
                                        <!--<div class="col-md-2">
                                          <input id="media_upload" name="media_upload" type="button" value="Upload" class="btn btn-primary add-new-bt full-width">
                                        </div>-->
                                        <div class="col-md-5"></div>
                                        <div class="col-md-7">
                                          <span style="font-size: 12px;">(Photos should be smaller than 1 MB and saved as JPG, PNG or GIF files)</span>
                                        </div>
                                        <input type="hidden" name="file_details" id="file_details" />
                                      </div>

                                <aside>
                                    <div class="form-group row">
                                      <label class="col-md-5">Health IT Standards Supported by the
                                        <span class="replace-it">offering</span>
                                        <span class="label-optional">(Optional)</span>
                                      </label>

                                      <div class="col-md-7">
                                        <div class="row">
                                          <div class="form-check col-md-6">
                                            <input class="form-check-input" name="hitStandards" type="checkbox" value="FHIR">
                                            <label class="form-check-label" for="defaultCheck1"> FHIR </label>
                                          </div>
                                          <div class="form-check col-md-6">
                                            <input class="form-check-input" name="hitStandards" type="checkbox" value="HL7">
                                            <label class="form-check-label" for="defaultCheck2"> HL7 </label>
                                          </div>
                                          <div class="form-check col-md-6">
                                            <input class="form-check-input" name="hitStandards" type="checkbox" value="CDA">
                                            <label class="form-check-label" for="defaultCheck2"> CDA </label>
                                          </div>
                                          <div class="form-check col-md-6">
                                            <input class="form-check-input" name="hitStandards" type="checkbox" value="CCOW">
                                            <label class="form-check-label" for="defaultCheck2"> CCOW </label>
                                          </div>
                                        </div>
                                      </div>

                                      <!--
                                    <div class="col-md-7">
                                      <select id="hitStandards" name="hitStandards[]" class="form-control" multiple>
                                        <option value="FHIR">FHIR</option>
                                        <option value="HL7">HL7</option>
                                        <option value="CDA">CDA</option>
                                        <option value="CCOW">CCOW</option>
                                        <option value="None of the Above">None of the above</option>
                                      </select>
                                    </div>
                                  -->
                                    </div>

                                </aside>

                                <div id="fhirDiv" >

                                  <aside>

                                      <div class="form-group row">
                                        <label class="col-md-5">FHIR versions supported by the
                                          <span class="replace-it">offering</span>
                                          <span class="label-optional">(Optional)</span>
                                        </label>
                                        <div class="col-md-7">
                                          <div class="row">
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhirVersion" id="fhirVersion1" type="checkbox" value="DSTU 1 (Official version)">
                                              <label class="form-check-label" for="defaultCheck1"> DSTU 1 (Official version) </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhirVersion" id="fhirVersion2" type="checkbox" value="DSTU 2 (Official version)">
                                              <label class="form-check-label" for="defaultCheck2"> DSTU 2 (Official version) </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhirVersion" id="fhirVersion3" type="checkbox" value="FHIR Release 3">
                                              <label class="form-check-label" for="defaultCheck2"> FHIR Release 3 </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhirVersion" id="fhirVersion4" type="checkbox" value="FHIR Release 4 (Normative)">
                                              <label class="form-check-label" for="defaultCheck2"> FHIR Release 4 (Normative) </label>
                                            </div>
                                          </div>
                                        </div>
                                      </div>

                                      <div class="form-group row">
                                        <label class="col-md-5">FHIR Resources supported by the
                                          <span class="replace-it">offering</span>
                                          <span class="label-optional">(Optional)</span>
                                        </label>
                                        <div class="col-md-7">
                                          <!--<select class="form-control" name="fhriResourceSupport" id="fhriResourceSupport" multiple>
                                          <option value="Patient">Patient</option>
                                          <option value="Diagnostic Report">Diagnostic Report</option>
                                          <option value="Observations">Observations</option>
                                          <option value="Allergy Intolerance">Allergy Intolerance</option>
                                          <option value="Condition">Condition</option>
                                          <option value="Adverse Event">Adverse Event</option>
                                          <option value="Procedure">Procedure</option>
                                          <option value="Medication Administration">Medication Administration</option>
                                          <option value="Medication Statement">Medication Statement</option>
                                          <option value="Family Member History">Family Member History</option>
                                        </select>
                                      -->
                                          <div class="row">
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Patient">
                                              <label class="form-check-label" for="defaultCheck1"> Patient </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Diagnostic Report">
                                              <label class="form-check-label" for="defaultCheck2"> Diagnostic Report </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Observations">
                                              <label class="form-check-label" for="defaultCheck2"> Observations </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Allergy Intolerance">
                                              <label class="form-check-label" for="defaultCheck2"> Allergy Intolerance </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Condition">
                                              <label class="form-check-label" for="defaultCheck2"> Condition </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Adverse Event">
                                              <label class="form-check-label" for="defaultCheck2"> Adverse Event </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Procedure">
                                              <label class="form-check-label" for="defaultCheck2"> Procedure </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Allergy Intolerance">
                                              <label class="form-check-label" for="defaultCheck2"> Allergy Intolerance </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Medication Administration">
                                              <label class="form-check-label" for="defaultCheck2"> Medication Administration </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Medication Statement">
                                              <label class="form-check-label" for="defaultCheck2"> Medication Statement </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="fhriResourceSupport" type="checkbox" value="Family Member History">
                                              <label class="form-check-label" for="defaultCheck2"> Family Member History </label>
                                            </div>
                                          </div>

                                        </div>
                                      </div>


                                  </aside>
                                </div>
                                <div id="hl7Div" >
                                  <hr>

                                  <aside>
                                      <div class="form-group row">
                                        <label class="col-md-5">HL7 Versions Supported by the
                                          <span class="replace-it">offering</span>
                                          <span class="label-optional">(Optional)</span>
                                        </label>

                                        <div class="col-md-7">
                                          <div class="row">
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="hl7version" type="checkbox" value="HL7 v2">
                                              <label class="form-check-label" for="defaultCheck1"> HL7 v2 </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="hl7version" type="checkbox" value="HL7 v3">
                                              <label class="form-check-label" for="defaultCheck2"> HL7 v3 </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="hl7version" type="checkbox" value="Clinical Document Architecture (CDA)">
                                              <label class="form-check-label" for="defaultCheck2"> Clinical Document Architecture (CDA) </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="hl7version" type="checkbox" value="Continuity of Care Document (CCD)">
                                              <label class="form-check-label" for="defaultCheck2"> Continuity of Care Document (CCD) </label>
                                            </div>
                                          </div>
                                        </div>

                                        <!--
                                      <div class="col-md-7">
                                        <select id="hl7version" name="hl7version[]" class="form-control" multiple>
                                          <option value="HL7 v2">HL7 v2</option>
                                          <option value="HL7 v3">HL7 v3</option>
                                          <option value="Clinical Document Architecture (CDA)">Clinical Document Architecture (CDA)</option>
                                          <option value="Continuity of Care Document (CCD)">Continuity of Care Document (CCD)</option>
                                        </select>
                                      </div>
                                      -->
                                      </div>

                                      <div class="form-group row">
                                        <label class="col-md-5">HL7 Message Types Supported by the
                                          <span class="replace-it">offering</span>
                                          <span class="label-optional">(Optional)</span>
                                        </label>
                                        <div class="col-md-7">

                                          <div class="row">
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="ACK">
                                              <label class="form-check-label" for="defaultCheck1"> ACK </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="ADT">
                                              <label class="form-check-label" for="defaultCheck2"> ADT </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="BAR">
                                              <label class="form-check-label" for="defaultCheck2"> BAR </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="DFT">
                                              <label class="form-check-label" for="defaultCheck2"> DFT </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="MDM">
                                              <label class="form-check-label" for="defaultCheck2"> MDM </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="MFN">
                                              <label class="form-check-label" for="defaultCheck2"> MFN </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="ORM">
                                              <label class="form-check-label" for="defaultCheck2"> ORM </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="ORU">
                                              <label class="form-check-label" for="defaultCheck2"> ORU </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="QRY">
                                              <label class="form-check-label" for="defaultCheck2"> QRY </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="RAS">
                                              <label class="form-check-label" for="defaultCheck2"> RAS </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="RDE">
                                              <label class="form-check-label" for="defaultCheck2"> RDE </label>
                                            </div>
                                            <div class="form-check col-md-3">
                                              <input class="form-check-input" name="hl7message" type="checkbox" value="SIU">
                                              <label class="form-check-label" for="defaultCheck2"> SIU </label>
                                            </div>
                                          </div>

                                          <!--
                                          <div class="arrow_box" id="hl7InfoMessageBox">Control click to choose multiple values</div>
                                          <select id="hl7message" name="hl7message[]" class="form-control" multiple>
                                            <option value="ACK">ACK</option>
                                            <option value="ADT">ADT</option>
                                            <option value="BAR">BAR</option>
                                            <option value="DFT">DFT</option>
                                            <option value="MDM">MDM</option>
                                            <option value="MFN">MFN</option>
                                            <option value="ORM">ORM</option>
                                            <option value="ORU">ORU</option>
                                            <option value="QRY">QRY</option>
                                            <option value="RAS">RAS</option>
                                            <option value="RDE">RDE</option>
                                            <option value="RGV">RGV</option>
                                            <option value="SIU">SIU</option>
                                          </select>
                                          -->
                                        </div>
                                      </div>
                                  </aside>
                                </div>

                                <div id="cdaDiv" >
                                  <hr>

                                  <aside>
                                      <div class="form-group row">
                                        <label class="col-md-5">CDA Versions Supported by the
                                          <span class="replace-it">offering</span>
                                          <span class="label-optional">(Optional)</span>
                                        </label>

                                        <div class="col-md-7">
                                          <div class="row">
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="cdaversion" type="checkbox" value="Release 1">
                                              <label class="form-check-label" for="defaultCheck1"> Release 1 </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="cdaversion" type="checkbox" value="Release 2">
                                              <label class="form-check-label" for="defaultCheck2"> Release 2 </label>
                                            </div>

                                          </div>
                                        </div>
                                        <!--
                                      <div class="col-md-7">
                                        <select id="cdaversion" name="cdaversion[]" class="form-control" multiple>
                                          <option value="Release 1">Release 1</option>
                                          <option value="Release 2">Release 2</option>
                                          <option value="None of the Above">None of the above</option>
                                        </select>
                                      </div>
                                      -->
                                      </div>
                                  </aside>
                                </div>

                                <div id="ccowDiv" >
                                  <hr>

                                  <aside>
                                      <div class="form-group row">
                                        <label class="col-md-5">CCOW Versions Supported by the
                                          <span class="replace-it">offering</span>
                                          <span class="label-optional">(Optional)</span>
                                        </label>
                                        <div class="col-md-7">
                                          <!--
                                        <select id="ccowversion" name="ccowversion[]" class="form-control" multiple>
                                          <option value="1.0">1.0</option>
                                          <option value="1.1">1.1</option>
                                          <option value="1.2">1.2</option>
                                          <option value="1.3">1.3</option>
                                          <option value="1.4">1.4</option>
                                          <option value="1.5">1.5</option>
                                          <option value="1.6">1.6</option>
                                        </select>
                                      -->
                                          <div class="row">
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="ccowversion" type="checkbox" value="1.0">
                                              <label class="form-check-label" for="defaultCheck1"> 1.0 </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="ccowversion" type="checkbox" value="1.1">
                                              <label class="form-check-label" for="defaultCheck2"> 1.1 </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="ccowversion" type="checkbox" value="1.2">
                                              <label class="form-check-label" for="defaultCheck2"> 1.2 </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="ccowversion" type="checkbox" value="1.3">
                                              <label class="form-check-label" for="defaultCheck2"> 1.3 </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="ccowversion" type="checkbox" value="1.4">
                                              <label class="form-check-label" for="defaultCheck2"> 1.4 </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="ccowversion" type="checkbox" value="1.5">
                                              <label class="form-check-label" for="defaultCheck2"> 1.5 </label>
                                            </div>
                                            <div class="form-check col-md-6">
                                              <input class="form-check-input" name="ccowversion" type="checkbox" value="1.6">
                                              <label class="form-check-label" for="defaultCheck2"> 1.6 </label>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                  </aside>
                                </div>
                              </fieldset>
                            </div>
                            <fieldset >
                              <legend>Institution Providing the
                                <span class="capital-case replace-it">Offering</span>
                              </legend>
                              <div class="form-group row" id="ownerDivEdit">
                                <label class="col-md-5">Are you the owner or owner's representative of this
                                  <span class="replace-it">offering</span>?
                                  <span class="label-required">(required)</span>
                                </label>
                                <div class="col-md-2">
                                  <label class="input-container radioCheckOwner">Yes
                                    <input type="radio" name="checkOwner" value="true" required/>
                                    <span class="checkmark"></span>
                                  </label>
                                </div>
                                <div class="col-md-2">
                                  <label class="input-container radioCheckOwner">No
                                    <input type="radio" name="checkOwner" value="false" required/>
                                    <span class="checkmark"></span>
                                  </label>
                                </div>
                              </div>
                              <div class="form-group row" id="tenantDetailDiv" style="display:none">
                                <label class="col-md-5">Please select your institution</label>
                                <div class="col-md-7">
                                  <select id="tenantId" name="tenantId" class="form-control instDisable">

                                  </select>
                                  <p class="institute"> Didn't find your Institution?
                                    <span>
                                      <a style="color:#00c3f3!important; cursor: pointer;" class="vendorInfoClick"> Add your Institution </a>
                                    </span>
                                  </p>
                                </div>
                              </div>
                              <input type="hidden" name="addInstitutionStatus" id="addInstitutionStatus">
                              <div class="vendorInfo">
                                <div class="form-group row">
                                  <label class="col-md-5">Name of the institution providing this
                                    <span class="replace-it">offering</span>
                                    <span class="label-required">(required)</span>
                                  </label>
                                  <div class="col-md-7">
                                    <input name="organization" id="organization" type="text" class="form-control" placeholder="Enter institution name">
                                  </div>
                                </div>

                                <div class="form-group row">
                                  <label class="col-md-5">Name of the contact person

                                  </label>
                                  <div class="col-md-7">
                                    <input type="text" name="vendorName" id="vendorName" class="form-control vendorCheckDet" placeholder="Enter contact person name">
                                  </div>
                                </div>

                                <div class="form-group row">
                                  <label class="col-md-5">Email address of institution
                                    <span class="label-required">(required)</span>
                                  </label>
                                  <div class="col-md-7">
                                    <input type="email"  name="contact" id="contact" class="form-control vendorCheckDet" placeholder="Primary email address of institution">
                                  </div>
                                </div>
                                <div class="form-group row">
                                  <label class="col-md-5">Contact number of institution
                                    <span class="label-required">(required)</span>
                                  </label>
                                  <div class="col-md-7">
                                    <input type="text" name="contactNumber" id="contactNumber" class="form-control vendorCheckDet" placeholder="Primary phone number of institution">
                                    <span id="errmsg" class="errorCustomMessage"></span>
                                  </div>
                                </div>
                              </div>
                            </fieldset>
                            <fieldset id="socialPresence" >

                                  <legend>Social presence of the
                                      <span class="capital-case replace-it">Offering</span>
                                    </legend>                                        
                                  <div class="form-group row">
                                    <label class="col-md-5">Facebook page of the
                                      <span class="replace-it">offering</span> / Institution
                                    </label>
                                    <div class="col-md-7">
                                      <input id="facebook" name="facebook" type="text" class="form-control" placeholder="Facebook page">
                                      <span class="errorCustomMessage validLinkFacebook">Please enter a valid website link.</span>
                                    </div>
                                  </div>  
                                  <div class="form-group row">
                                    <label class="col-md-5">Twitter page of the
                                      <span class="replace-it">offering</span> / Institution
                                    </label>
                                    <div class="col-md-7">
                                      <input id="twitter" name="twitter" type="text" class="form-control" placeholder="Twitter page">
                                      <span class="errorCustomMessage validLinkTwitter">Please enter a valid website link.</span>
                                    </div>
                                  </div> 
                                  <div class="form-group row">
                                    <label class="col-md-5">LinkedIn page of the
                                      <span class="replace-it">offering</span> / Institution
                                    </label>
                                    <div class="col-md-7">
                                      <input id="linkedin" name="linkedin" type="text" class="form-control" placeholder="LinkedIn page">
                                      <span class="errorCustomMessage validLinkLinkedin">Please enter a valid website link.</span>
                                    </div>
                                  </div> 
                                  <div class="form-group row">
                                    <label class="col-md-5">Instagram page of the
                                      <span class="replace-it">offering</span> / Institution
                                    </label>
                                    <div class="col-md-7">
                                      <input id="instagram" name="instagram" type="text" class="form-control" placeholder="Instagram page">
                                      <span class="errorCustomMessage validLinkInstagram">Please enter a valid website link.</span>
                                    </div>
                                  </div>                                    
                            </fieldset>
                            <div class="row new-row-space">

                              <div class="product-info-details" style="display: none;">
                                <div class="form-group row d-none">
                                  <fieldset style="display:none">

                                    <label class="col-md-5">Feature product</label>
                                    <div class="col-md-7">
                                      <select id="featureProduct" name="featureProduct" class="form-control">
                                        <option value="No" selected>No</option>
                                        <option value="Yes">Yes</option>
                                      </select>
                                    </div>
                                  </fieldset>
                                </div>


                                <div class="form-group row" style="display:none">
                                  <label class="col-md-5">Created On</label>
                                  <div class="col-md-7">
                                    <input type="text" class="form-control" id="createdOn" name="createdOn">
                                  </div>
                                </div>


                                <div class="form-group row d-none">
                                  <fieldset style="display:none">
                                    <label class="col-md-5">Permalink</label>
                                    <div class="col-md-7">
                                      <input id="permalink" name="permalink" type="text" class="form-control" placeholder="Enter permalink">
                                    </div>
                                  </fieldset>
                                </div>


                              </div>
                            </div>

                          </div>
                          <!--- Replacing div for <span class="replace-it">offering</span> end here-->
                        </aside>

                        <!--- Replacing div for <span class="replace-it">offering</span> starts here-->




                        <div class="form-group row">
                          <div class="col-md-5"> </div>
                          <div class="col-md-7">
                            <div id="recaptchaCommon"></div>
                            <span class="captcha-message-common" style="margin-left:0px !important;">Please verify the Captcha</span>
                          </div>

                        </div>


                      </section>

                      <div class="text-right submit-tooltip">

                        <div class="arrow_box_addOffering arrow_box_submit_addOffering" id="submitInfoMessageBox">The required fields are not entered.</div>
                        <div class="submitButtonOverlay"></div>
                        <button style="opacity: 1;" type="submit" class="btn btn-primary add-new-bt full-width" name="addProduct" id="addProduct">
                          Submit </button>


                      </div>

                    </form>
                </div>
                <!-- profile tab ends ::::::::::::::::::::::::::::::::::: -->


            </div>

            </article>

          </div>
        </div>





        </div>

      </article>

    </main>
  </section>
  {{ partialCached "footer.html" . }}
</body>

</html>