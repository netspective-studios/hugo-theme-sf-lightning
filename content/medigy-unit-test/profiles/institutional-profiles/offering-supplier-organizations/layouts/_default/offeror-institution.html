<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}" dir="ltr">
  {{ partialCached "head.html" . "innovator-list-key"}}
  <body class="list-body">

<!-- Google Tag Manager (noscript) -->
<div id="g-tag-body">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ $.Site.Params.GTMCode }}"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
</div>
  <!-- End Google Tag Manager (noscript) -->

{{ partialCached "nav-bar.html" . "innovator-list-key"}}

{{ $currentTag := index (last 1 (split (delimit (split .Permalink  "/") "," "") ",")) 0 }}
    <section class="commun-wrapper">
      
        <article class="new-ofering-row-3 commun-content-row-3">
          <div class="container">
            {{ partialCached "bread-crumb.html" . "innovator-list-key"}}
            
            <div class="row">
                <div class="col-lg-12">

                  <div class="category-what-new-row min-height institute-list">                    
                                                   
                  <div class="top-10-most-row">
                    <div class="top-10-most-row-tab-ttl">
                      Institutions:
                      <ul class="nav nav-tabs text-center" id="myTab" role="tablist">
                          <li class="nav-item">
                            <a class="nav-link show " id="followed-tab" data-toggle="tab" href="/profile/regulated/institution/us-dhhs-cms/hospital/" role="tab" aria-controls="followed" aria-selected="true" title="Heathcare Delivery Organization"><i class="far fa-hospital"></i> Heathcare Delivery Organizations</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link show active" id="favorite-tab" data-toggle="tab" href="/profile/offeror/institution/" role="tab" aria-controls="favorite" aria-selected="false"><i class="fas fa-history"></i> Innovators</a>
                          </li>
                          
                      </ul>


                    </div>
                    <div class="tab-content" id="myTabContent">
                      <div class="tab-pane fade active show" id="followed" role="tabpanel" aria-labelledby="followed-tab">
                        <div class="top-10-most-list">
                          <div class="fhir-list-row">
                            {{ $postCount := len (.Pages.ByDate) }}
                            {{ $paginator :=  .Paginate .Pages.ByDate  }}                
                             {{ range $paginator.Pages}}                     
                                {{ .Render "li-offeror-institution" }}
                              {{ end }} 
                              <div class="custom-pagination-block"> {{ $postCount }} items
                                    {{ template "_internal/pagination.html" . }}
                              </div>                                                       
                        </div>
                      </div>  
                         
                     <!-- product listings ends -->                                         
                    </div>
     
                  </div>
                </div> 
              </div><!-- category-what-new-row ends -->
             


              </div>
            </div>
          </div>
        </article>  
    </section>



  
    {{ partialCached "scripts.html" . }}
      
    <div id="formContainer">
      </div>
    <!--<script src="https://clin-table-search.lhc.nlm.nih.gov/lforms-versions/13.1.0/lforms.min.js"></script>-->

    <script>
$(window).bind("load", function() {
  var post_ids='';
  var updatedData;
  $(".upVote > div ").each(function() {
     post_ids += $(this).attr("data-app")+',';
  });
  post_ids = post_ids.slice(0,-1);

var settings = {
  "async": true,
  "crossDomain": true,
  "url": "{{ $.Site.Params.GraphQLUrl }}",
  "method": "GET",
  "headers": {
    "Content-Type": "application/x-www-form-urlencoded",
    "cache-control": "no-cache"
  },
  "data": {
    "query": "query{\n  getPrometheusData(inputData:\""+post_ids+"\",inputType:\"all\"){\n    status\n    data{\n      metric{\n        name\n        job\n        id\n        createdOn\n        updatedOn\n        status\n        source\n        personId\n        type\n        typeName\n      }\n      value\n    }\n  }\n}"
  
  }
}

      $.ajax(settings).done(function (response) {
      updatedData = response;

        });

  setTimeout( function(){
    $(".upVote > div ").each(function() {
      var totalUpvote = 0;
    var post_id = $(this).attr("data-app");
    //console.log(post_id);
    //$(this).find(".b").html(post_id);
    var this_var = $(this);
    for (key in updatedData.data.getPrometheusData.data) {
        //console.log(post_id);
        if(updatedData.data.getPrometheusData.data[key].metric.id == post_id && updatedData.data.getPrometheusData.data[key].metric.name == 'medigy_total_upvote_count')
        {
          totalUpvote+= parseInt(updatedData.data.getPrometheusData.data[key].value[1]);
        }

      }
      if(totalUpvote != 0)
      this_var.find(".b").html(totalUpvote);

    });
    $(".email-share-push").each(function() {
    var post_id = $(this).attr("data-app");
    //console.log(post_id);
    //$(this).find(".b").html(post_id);
    var this_var = $(this);
    var totalEmail = 0;
      for (key in updatedData.data.getPrometheusData.data) {
          //console.log(post_id);
        if(updatedData.data.getPrometheusData.data[key].metric.id == post_id && updatedData.data.getPrometheusData.data[key].metric.name == 'medigy_total_email_share_count')
          {
            totalEmail+= parseInt(updatedData.data.getPrometheusData.data[key].value[1]);
          }

        }
        if(totalEmail != 0)
        this_var.find(".b").html(totalEmail);

    });
    $(".watchList > div ").each(function() {
    var post_id = $(this).attr("data-app");
    //console.log(post_id);
    //$(this).find(".b").html(post_id);
    var this_var = $(this);
    var totalWatch = 0;
      for (key in updatedData.data.getPrometheusData.data) {
          //console.log(post_id);
        if(updatedData.data.getPrometheusData.data[key].metric.id == post_id && updatedData.data.getPrometheusData.data[key].metric.name == 'medigy_watch_status')
          {
            totalWatch+= parseInt(updatedData.data.getPrometheusData.data[key].value[1]);
          }

        }
        if(totalWatch != 0)
        this_var.find(".b").html(totalWatch);

    });
    
 
    $(".twitter-share-push").each(function() {
    var twitterUrl = $(this).attr("data-twitter");
    var this_var = $(this);
      if(twitterUrl != 'Nil')
  {
      var screenName = twitterUrl.split('twitter.com/');
      var screenName = screenName[1].replace(/\\/gi, '');
      var settings = {
        "async": true,
        "crossDomain": true,
        "url": "{{ $.Site.Params.GraphQLUrl }}",
        "method": "POST",
        "headers": {
          "Content-Type": "application/x-www-form-urlencoded",
          "cache-control": "no-cache",
          "Postman-Token": "ca46d151-5bda-4f5b-a138-d765f0c89f8f"
        },
        "data": {
          "query": "query{\n  getTwitterDetails(inputData:\""+screenName+"\"){\n    id\n    name\n    screenName\n    followersCount\n status\n }\n}"
        }
      }
      $.ajax(settings).done(function (response) {
        if(response.data.getTwitterDetails.status == 'Success' && response.data.getTwitterDetails.followersCount != 0)
          this_var.find(".b").html(response.data.getTwitterDetails.followersCount);
      });

    }
    });
    

  },800);      

});




$(document).ready(function(){ 

///// category name listing starts here

$('.tag-style-1').on("click", function(){
var category = $(this).find('a').html();
if(category.indexOf("Medigy: ") != -1){
  var splitedCategory = category.split(':');
  setCookie('currentCategory',splitedCategory[1]);
}
else
  setCookie('currentCategory',category);
  
});

{{ $url := urls.Parse .Permalink }}	

var urlPath = "{{ $url.Path }}";

if(urlPath.indexOf("categories") != -1)
  $('#categoryName').html(getCookie('currentCategory'));

///// category name listing ends here

/// Push upvote to Prometheus via GrpahQl mutation starts here  


$(".upVote > div ").on("click", function(){
  if($(this).attr('disabled'))
  {
    console.log('exists');return false;
  }
  else
  {
    $(this).attr("disabled","disabled");
    $(this).css('cursor','default');
    var post_id = $(this).attr("data-app");
    var currentUpvote = $(this).find(".b").html();
    var personid = getCookie('personid');
    var this_var = $(this);
    
    if(personid != null)
    {
      //console.log("mutation{updatePromCount(type:\"upvote\",inputData:\"{\\\"source\\\": \\\"http://medigy.com\\\",\\\"identifier\\\": \\\""+post_id+"\\\",\\\"type\\\":\\\"upvote\\\",\\\"upvoteCount\\\": \\\"1\\\",\\\"personId\\\": \\\""+personid+"\\\"}\")}"); 
      var settings = {
    "async": true,
    "crossDomain": true,
    "url": "{{ $.Site.Params.GraphQLUrl }}",
    "method": "POST",
    "headers": {
      "Content-Type": "application/x-www-form-urlencoded",
      "cache-control": "no-cache"
    },
    "data": {
      "query": "mutation{updatePromCount(type:\"upvote\",inputData:\"{\\\"source\\\": \\\"http://medigy.com\\\",\\\"identifier\\\": \\\""+post_id+"\\\",\\\"type\\\":\\\"upvote\\\",\\\"upvoteCount\\\": \\\"1\\\",\\\"personId\\\": \\\""+personid+"\\\"}\")}"
    
    }
  }

  $.ajax(settings).done(function (response) {
    if(response.data.updatePromCount == "Successfully added prometheus data")
    {
      if(currentUpvote == '')
        currentUpvote = 0;
      var updatedCount = parseInt(currentUpvote)+1;
      this_var.find(".b").html(updatedCount);
    }
    console.log(response);

  });
    }
    else
    {
      $('#messageModal').html("");
      $('#messageModal').html("Please login to Upvote.");
      $('#loginModalCenter').modal();
    
    }
}
});
/// Push upvote to Prometheus via GrpahQl mutation ends here  



/// Push email share to Prometheus via GrpahQl mutation starts here  

$(".email-share-push ").on("click", function(){
  var post_id = $(this).attr("data-app");
  var post_name = $(this).attr("data-name");
  var this_var = $(this);
  var personid = getCookie('personid');
  var currentemailShare = this_var.find(".b").html();
  var updatedemailShare = parseInt(currentemailShare) +1;
  
  if(personid != null)
  {  
    var settings = {
  "async": true,
  "crossDomain": true,
  "url": "{{ $.Site.Params.GraphQLUrl }}",
  "method": "POST",
  "headers": {
    "Content-Type": "application/x-www-form-urlencoded",
    "cache-control": "no-cache"
  },
  "data": {
    "query": "mutation{\n  updatePromCount(type:\"emailshare\",\n    inputData:\"{\\\"source\\\": \\\"http://medigy.com\\\",\\\"type\\\": \\\"Product\\\",\\\"identifier\\\": \\\""+post_id+"\\\",\\\"emailShareCount\\\": \\\"1\\\",\\\"personId\\\": \\\""+personid+"\\\",\\\"name\\\":\\\""+post_name+"\\\",\\\"status\\\": \\\"1\\\"}\")\n}"
    
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
  this_var.find(".b").html(updatedemailShare);
});
this_var.find(".b").html(updatedemailShare);
  }
  else
  {
    $('#messageModal').html("");
    $('#messageModal').html("Please login to Upvote.");
    $('#loginModalCenter').modal();
   
  }
});
/// Push email share to Prometheus via GrpahQl mutation ends here



/// Push watch to Prometheus via GrpahQl mutation starts here 

$('.watchList').on("click", function(){
if($(this).attr("disable") != "disable")
{
  $(this).attr("disable","disable");
  $(this).css("cursor","default");
  var post_id = $(this).attr("data-app");
  var title = $(this).attr("data-name");
  var currentWatch = $(this).children().find('.b').html();
  var updatedWatch = parseInt(currentWatch) + 1;
  var personid = getCookie('personid');
  if(personid != null)
  {
    console.log("mutation{\n  updatePromCount(type:\"watch\",inputData:\"{\\\"source\\\": \\\"http://medigy.com\\\",\\\"identifier\\\": \\\""+post_id+"\\\",\\\"type\\\": \\\"Product\\\",\\\"personId\\\": \\\""+personid+"\\\",\\\"name\\\": \\\""+title+"\\\",\\\"status\\\": \\\"1\\\"}\")\n}")
    var settings = {
  "async": true,
  "crossDomain": true,
  "url": "{{ $.Site.Params.GraphQLUrl }}",
  "method": "POST",
  "headers": {
    "Content-Type": "application/x-www-form-urlencoded",
    "cache-control": "no-cache"
  },
  "data": {
    "query": "mutation{\n  updatePromCount(type:\"watch\",inputData:\"{\\\"source\\\": \\\"http://medigy.com\\\",\\\"identifier\\\": \\\""+post_id+"\\\",\\\"type\\\": \\\"Product\\\",\\\"personId\\\": \\\""+personid+"\\\",\\\"name\\\": \\\""+title+"\\\",\\\"status\\\": \\\"1\\\"}\")\n}"
  
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);


});
  }
  else
  {
    $('#messageModal').html("");
    $('#messageModal').html("Please login to Watch.");
    $('#loginModalCenter').modal();
   
  }  

}
else
return false;
});

/// Push FacebookShare to Prometheus via GrpahQl mutation starts here  
var personid = getCookie('personid');
  
if(personid != null)
{
   
    $(".email-share-push").each(function() {
      var safeUrl = $(this).attr("data-safe-url");
      var shareUrl = "mailto:?subject={{ .Title }}&body={{ $.Site.Params.socialshare }}"+safeUrl;
      $(this).attr('href',shareUrl);
      $(this).addClass('fb-share');
    });
    
}
else
{

    $(".twitter-share-push").each(function() {
      $(this).attr("data-toggle",'modal');
     $(this).attr("data-target",'#loginModalCenter');
    });
    $(".email-share-push").each(function() {
      $(this).attr("data-toggle",'modal');
     $(this).attr("data-target",'#loginModalCenter');
    });
}
$('.fb-share-push').on("click",function(){

  var post_id = $(this).attr("data-app");
  var slug = $(this).attr("data-slug");
  var title = $(this).attr("data-name");
  var this_var = $(this);
  var personid = getCookie('personid');
  var currentfbShare = this_var.find(".b").html();
  var updatedfbShare = parseInt(currentfbShare) +1;
  if(personid != null)
  {
    var settings = {
  "async": true,
  "crossDomain": true,
  "url": "{{ $.Site.Params.GraphQLUrl }}",
  "method": "POST",
  "headers": {
    "Content-Type": "application/x-www-form-urlencoded",
    "cache-control": "no-cache"
  },
  "data": {
    "query": 'mutation{\n  updatePromCount(type:"fbshare",inputData:"{\\"source\\": \\"http://medigy.com\\",\\"identifier\\": \\"'+post_id+'\\",\\"type\\": \\"Product\\",\\"personId\\": \\"e0900086-c153-11e8-9983-0d20fc029a28\\",\\"name\\": \\"HealtHIE Nevada\\",\\"status\\": \\"1\\",\\"productSlug\\": \\"healthie-nevada\\"}")\n}'
  
  }
}
console.log('mutation{\n  updatePromCount(type:"fbshare",inputData:"{\\"source\\": \\"http://medigy.com\\",\\"identifier\\": \\"'+post_id+'\\",\\"type\\": \\"Product\\",\\"personId\\": \\"e0900086-c153-11e8-9983-0d20fc029a28\\",\\"name\\": \\"HealtHIE Nevada\\",\\"status\\": \\"1\\",\\"productSlug\\": \\"healthie-nevada\\"}")\n}');
$.ajax(settings).done(function (response) {
  console.log(response);

this_var.find(".b").html(updatedfbShare);
});
this_var.find(".b").html(updatedfbShare);
  }
  else
  {
    $('#messageModal').html("");
    $('#messageModal').html("Please try to login!");
    $('#loginModalCenter').modal();
   
  }  
  
});
$('ul.nav-tabs > .nav-item > .nav-link').click(function(e){
  e.preventDefault();
  window.location.href = $(this).attr('href');
})
/// Push FacebookShare to Prometheus via GrpahQl mutation ends here 


/*
$(".upVote > div ").on("click", function(){
//console.log($(this).attr("data-app"));
var post_id = $(this).attr("data-app");
//console.log($(this).find(".b").html());
$(this).find(".b").html(5);
var this_var = $(this);
$.ajax({
  url: "https://stage.medigy.com/upvote.json",
  dataType: 'JSON',
  type: 'POST',
  crossDomain: true, 
  data: {post:post_id,upvoteCount:},
  success: function (data) {
    for (i in data) {
      //console.log(data[i].post);
     // console.log(data[i].post +' == '+ post_id)
      if(data[i].post == post_id)
      {
        var updatedCount = parseInt(data[i].upvoteCount)+1;
        this_var.find(".b").html(updatedCount);
        data[i].upvoteCount = updatedCount;
       // console.log(data);
        break;
      }
    }
  },
  error:function(x){
    console.log("Error");
    console.log(x)
  } 
});
$.ajax({
  
    //url: "https://metrics.netspective.com/api/v1/query?query={repo=%22fhir-net-api%22,user=%22ewoutkramer%22}",
    url: "http://graph.facebook.com/?id=https://www.fhirhunt.com/trending/ascvd_risk_calculator/?fbclid=IwAR1mCfclteB4biKlLNtXQexmL_iRk9Y-FJv4DLkfaGIfR5ZWf8gu1bhcLXw",
    dataType: 'JSONP',
    type: 'GET',
    headers: {  "cache-control": "no-cache",'Access-Control-Allow-Origin': '*' },
    crossDomain: true, 
    success: function (data) {

//console.log(data.share.share_count);
        //data.
    },
    error:function(x){
      console.log(x)
    } 
  });


});
*/

//alert(window.location.href)
$('.trendValue').hide();

});

$('.card').on("click", function(e){
//e.preventDefault();
document.cookie = 'activeTab=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';
console.log('activetab Issue');
});
console.log(332211)

sbjs.init({ callback: go });

function go(sb) {
  console.log('Cookies are set! Your current source is: ' + sb.current.typ);
}

    </script>
 {{ partialCached "footer.html" . }}      
  </body>
</html>